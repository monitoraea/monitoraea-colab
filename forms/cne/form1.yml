fields:

- key: logo_arquivo
  block: main
  type: thumbnail
  title: Logotipo
  db_field: logo_arquivo
  size: 2

- key: nome
  block: main
  type: text
  title: Nome
  size: 12
  client_validation: not_empty # not implemented yet
  validation:
    - type: not_empty

- key: tipologia
  block: main
  type: options
  title: Tipologia
  size: 4
  options:
    - value: -1
      label: Não respondido
    - value: 0
      label: 'Centro'
    - value: 1
      label: 'Núcleo'
    - value: 2
      label: 'Equipamento'
    - value: 3
      label: 'Outro'
  validation: 
    - type: neq
      value: -1
    - type: not_empty

- key: uf
  block: main
  type: options
  title: Estado
  size: 4
  remote: uf/all
  query: empty=1
  onchange:
    - key: municipio
      value:

- key: municipio
  block: main
  type: async_autocomplete
  title: Município
  size: 4
  remote_list: municipio/related
  remote_single: municipio/single
  filter:
    - uf

- key: detalhamento_desc
  block: details
  type: textarea
  rows: 3
  title: Descrição
  size: 12

- key: detalhamento_data
  block: details
  type: monthpicker
  title: Data da versão mais atual
  size: 4

- key: detalhamento_tipo
  block: details
  type: options
  title: Tipo de documento de detalhamento
  size: 2
  onchange:
    - key: detalhamento_arquivo
      value:
    - key: detalhamento_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: detalhamento_arquivo
  block: details
  type: text
  title: Link para o detalhamento interno
  size: 6
  show:
    target:
      key: detalhamento_tipo
      value: link

- key: detalhamento_arquivo2
  block: detalhamento_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de detalhamento
  db_field: detalhamento_arquivo
  size: 6
  show:
    target:
      key: detalhamento_tipo
      value: file

- key: nome_inst
  block: intitutions_it
  type: text
  title: Nome %index%
  size: 4

- key: segmento_inst
  block: intitutions_it
  type: text
  title: Segmento %index%
  size: 4

- key: nome_gestor
  block: managers_it
  type: text
  title: Nome %index%
  size: 4

- key: email_gestor
  block: managers_it
  type: text
  title: E-mail %index%
  size: 4

- key: telefone_gestor
  block: managers_it
  type: text
  title: Telefone %index%
  size: 4

- key: data_criacao
  block: inst
  type: monthpicker
  title: Data da criação
  size: 3
  validation: 
    - type: not_empty

- key: data_inst
  block: inst
  type: monthpicker
  title: Data da institucionalização
  size: 3
  
- key: cnpj
  block: inst
  type: text
  title: CNPJ do CECSA
  size: 4

- key: estrategia_desc
  block: strategy
  type: textarea
  rows: 3
  title: Descrição
  size: 12

- key: estrategia_data
  block: strategy
  type: monthpicker
  title: Data da versão mais atual
  size: 4

- key: estrategia_tipo
  block: strategy
  type: options
  title: Tipo de documento de estrategia
  size: 2
  onchange:
    - key: estrategia_arquivo
      value:
    - key: estrategia_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: estrategia_arquivo
  block: strategy
  type: text
  title: Link para o estrategia interno
  size: 6
  show:
    target:
      key: estrategia_tipo
      value: link

- key: estrategia_arquivo2
  block: estrategia_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de estrategia
  db_field: estrategia_arquivo
  size: 6
  show:
    target:
      key: estrategia_tipo
      value: file

- key: resultado_tipo
  block: outcomes_it
  type: options
  options:
    - value: -1
      label: Não respondido
    - value: 0
      label: 'Formação'
    - value: 1
      label: 'Educomunicação'
    - value: 2
      label: 'Articulação'
  title: Tipo %index%
  size: 4

- key: resultado_link
  block: outcomes_it
  type: text
  title: Link
  size: 4

- key: resultado_data
  block: outcomes_it
  type: monthpicker
  title: Data da versão mais atual
  size: 4

blocks: # opcional

  - key: main
    title: Sobre a Iniciativa

  - key: managers
    title: Gestores responsáveis
    elements:
      - type: block
        key: managers_it

  - key: managers_it
    iterate:
      target: none
      index: default
      add: Adicionar gestor  

  - key: institutions
    title: Instituições proponentes
    elements:
      - type: block
        key: intitutions_it

  - key: intitutions_it
    iterate:
      target: none
      index: default
      add: Adicionar instituição    

  - key: inst
    title: Institucional  

  - key: details
    title: Detalhamento

  - key: strategy
    title: Estratégia de sustentabilidade

  - key: outcomes
    title: Resultados e Produtos gerados
    elements:
      - type: block
        key: outcomes_it

  - key: outcomes_it
    iterate:
      target: none
      index: default
      add: Adicionar resultado ou produto