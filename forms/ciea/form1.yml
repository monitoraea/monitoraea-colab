fields:

- key: logo_arquivo
  block: detalhes
  type: thumbnail
  title: Logotipo
  db_field: logo_arquivo
  size: 2

- key: uf_nome
  block: detalhes
  type: read_only
  title: Estado
  size: 3

- key: regiao
  block: detalhes
  type: read_only
  title: Região
  size: 3

- key: data_criacao
  block: detalhes
  type: yearpicker
  title: Data da criação
  size: 3

- key: ativo
  block: detalhes
  type: options
  title: Ativo
  size: 3
  options:
    - value: 1
      label: 'Sim'
    - value: 2
      label: 'Em reestruturação'
    - value: 3
      label: 'Não'

- key: link
  block: detalhes
  type: text
  title: Link para o site
  size: 12

- key: documento_criacao
  block: documento
  type: text
  title: Título do documento de criação
  size: 4

- key: documento_criacao_tipo
  block: documento
  type: options
  title: Tipo de documento de criação
  size: 2
  onchange: # pode indicar um script (TODO)
    - key: documento_criacao_arquivo # pode indicar um script (TODO)
      value:
    - key: documento_criacao_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: documento_criacao_arquivo
  block: documento
  type: text
  title: Link para o documento de criação
  size: 6
  show:
    target:
      key: documento_criacao_tipo
      value: link

- key: documento_criacao_arquivo2
  block: documento
  type: file
  accept: application/pdf
  title: Arquivo de criação
  db_field: documento_criacao_arquivo
  size: 6
  show:
    target:
      key: documento_criacao_tipo
      value: file

- key: composicao_cadeiras_set_pub
  block: composicao
  type: integer
  title: Núm. cadeiras - setor público
  size: 3

- key: composicao_cadeiras_soc_civ
  block: composicao
  type: integer
  title: Núm. cadeiras - sociedade civil
  size: 3

- key: setor
  block: composicao_cadeiras_outros
  type: text
  title: Setor %index%
  size: 6

- key: cadeiras
  block: composicao_cadeiras_outros
  type: integer
  title: Cadeiras %index%
  size: 6

- key: coordenacao
  block: coordenacao_block
  type: options
  title: Órgão gestor
  size: 6
  list: 
    module: property
    key: tipo_coordenacao

- key: coordenacao_especifique
  block: coordenacao_block
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: coordenacao
      value: [4,6]

- key: regimento_interno_tem
  block: regimento_interno_block
  type: options
  title: Tem regimento?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: regimento_interno
  block: regimento_interno_tem_block
  type: text
  title: Título do regimento interno
  size: 12

- key: regimento_interno_tipo
  block: regimento_interno_tem_block
  type: options
  title: Tipo de documento de regimento
  size: 2
  onchange:
    - key: regimento_interno_arquivo
      value:
    - key: regimento_interno_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: regimento_interno_arquivo
  block: regimento_interno_tem_block
  type: text
  title: Link para o regimento interno
  size: 6
  show:
    target:
      key: regimento_interno_tipo
      value: link

- key: regimento_interno_arquivo2
  block: regimento_interno_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de regimento
  db_field: regimento_interno_arquivo
  size: 6
  show:
    target:
      key: regimento_interno_tipo
      value: file

- key: org_interna_periodicidade
  block: organizacao_interna
  type: options
  title: Periodicidade
  size: 6
  options:
    - value: 1
      label: Mensal
    - value: 2
      label: Bimestral
    - value: 3
      label: Semestral
    - value: 4
      label: Anual
    - value: 5
      label: Outro

- key: organizacao_interna_periodicidade_especifique
  block: organizacao_interna
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: org_interna_periodicidade
      value: 5

- key: organizacao_interna_estrutura_tem
  block: organizacao_interna
  type: options
  title: Possui câmaras técnicas ou grupos de trabalho?
  size: 6
  list: 
    module: property
    key: sim_nao

- key: organizacao_interna_estrutura_especifique
  block: organizacao_interna
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: organizacao_interna_estrutura_tem
      value: true

- key: ppea_tem
  block: ppea_block
  type: options
  title: Tem política pública?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: ppea_tipo
  block: ppea_tem_block
  type: options
  title: Tipo de documento de política pública
  size: 2
  onchange:
    - key: ppea_arquivo
      value:
    - key: ppea_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: ppea_arquivo
  block: ppea_tem_block
  type: text
  title: Link para a política pública
  size: 6
  show:
    target:
      key: ppea_tipo
      value: link

- key: ppea_arquivo2
  block: ppea_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de política pública
  db_field: ppea_arquivo
  size: 6
  show:
    target:
      key: ppea_tipo
      value: file

- key: ppea_decreto
  block: ppea_tem_block
  type: text
  title: Decreto
  size: 3

- key: ppea_lei
  block: ppea_tem_block
  type: text
  title: Lei
  size: 3

- key: ppea2_tem
  block: ppea2_block
  type: options
  title: Tem política pública?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: ppea2_tipo
  block: ppea2_tem_block
  type: options
  title: Tipo de documento de política pública
  size: 2
  onchange:
    - key: ppea2_arquivo
      value:
    - key: ppea2_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: ppea2_arquivo
  block: ppea2_tem_block
  type: text
  title: Link para a política pública
  size: 6
  show:
    target:
      key: ppea2_tipo
      value: link

- key: ppea2_arquivo2
  block: ppea2_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de política pública
  db_field: ppea2_arquivo
  size: 6
  show:
    target:
      key: ppea2_tipo
      value: file

- key: ppea2_decreto
  block: ppea2_tem_block
  type: text
  title: Decreto
  size: 3

- key: ppea2_lei
  block: ppea2_tem_block
  type: text
  title: Lei
  size: 3

- key: programa_estadual_tem
  block: programa_estadual_block
  type: options
  title: Tem programa estadual?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: programa_estadual_tipo
  block: programa_estadual_tem_block
  type: options
  title: Tipo de documento
  size: 2
  onchange:
    - key: programa_estadual_arquivo
      value:
    - key: programa_estadual_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: programa_estadual_arquivo
  block: programa_estadual_tem_block
  type: text
  title: Link para o programa
  size: 6
  show:
    target:
      key: programa_estadual_tipo
      value: link

- key: programa_estadual_arquivo2
  block: programa_estadual_tem_block
  type: file
  accept: application/pdf
  title: Arquivo do programa
  db_field: programa_estadual_arquivo
  size: 6
  show:
    target:
      key: programa_estadual_tipo
      value: file

- key: programa_estadual_decreto
  block: programa_estadual_tem_block
  type: text
  title: Decreto
  size: 3

- key: programa_estadual_lei
  block: programa_estadual_tem_block
  type: text
  title: Lei
  size: 3

- key: plano_estadual_tem
  block: plano_estadual_block
  type: options
  title: Tem plano estadual?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: plano_estadual_tipo
  block: plano_estadual_tem_block
  type: options
  title: Tipo de documento
  size: 2
  onchange:
    - key: plano_estadual_arquivo
      value:
    - key: plano_estadual_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: plano_estadual_arquivo
  block: plano_estadual_tem_block
  type: text
  title: Link para o plano
  size: 6
  show:
    target:
      key: plano_estadual_tipo
      value: link

- key: plano_estadual_arquivo2
  block: plano_estadual_tem_block
  type: file
  accept: application/pdf
  title: Arquivo do plano
  db_field: plano_estadual_arquivo
  size: 6
  show:
    target:
      key: plano_estadual_tipo
      value: file

- key: plano_estadual_decreto
  block: plano_estadual_tem_block
  type: text
  title: Decreto
  size: 3

- key: plano_estadual_lei
  block: plano_estadual_tem_block
  type: text
  title: Lei
  size: 3

################################################################

blocks:

  - key: detalhes
    title: Detalhes da comissão
  
  - key: documento
    title: Documento de criação

  - key: composicao
    title: Composição
    elements:
      - type: block # posicional para sem view, hierarquico para ambos 
        # TODO problema: sempre aparece como último elemento em relação aos campos com propriedade block preenchida
        key: composicao_cadeiras_outros

  - key: composicao_cadeiras_outros
    iterate:
      target: none
      index: default
      add: Adicionar setor
  
  - key: coordenacao_block
    title: Coordenação

  - key: regimento_interno_block
    title: Regimento interno
    elements:
      - type: block
        key: regimento_interno_tem_block

  - key: regimento_interno_tem_block   
    show:
      target:
        key: regimento_interno_tem
        value: true

  - key: organizacao_interna
    title: Organização interna

  - key: ppea_block
    title: Política Pública Estadual de Educação Ambiental
    elements:
      - type: block
        key: ppea_tem_block

  - key: ppea_tem_block
    show:
      target:
        key: ppea_tem
        value: true

  - key: ppea2_block
    title: Política Pública Estadual de Mudanças do Clima
    elements:
      - type: block
        key: ppea2_tem_block

  - key: ppea2_tem_block  
    show:
      target:
        key: ppea2_tem
        value: true
  
  - key: programa_estadual_block
    title: Programa Estadual de Educação Ambiental
    elements:
      - type: block
        key: programa_estadual_tem_block

  - key: programa_estadual_tem_block
    show:
      target:
        key: programa_estadual_tem
        value: true
  
  - key: plano_estadual_block
    title: Plano Estadual de Educação Ambiental     
    # show: # TODO este teste não funciona com VIEW
    #   target:
    #     key: programa_estadual_tem
    #     value: true
    elements:
      - type: block
        key: plano_estadual_tem_block

  - key: plano_estadual_tem_block  
    show:
      target:
        key: plano_estadual_tem
        value: true

################################################################
# objetos livres não definida no protocolo, para fins de abastecer o servidor com mais informações

link_or_file_fields:
  - documento_criacao
  - regimento_interno
  - ppea
  - ppea2
  - programa_estadual
  - plano_estadual  