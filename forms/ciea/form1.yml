fields:

- key: tipo_colegiado
  block: detalhes
  type: options
  title: Tipo de Colegiado
  size: 4
  list: 
    module: property
    key: tipo_colegiado

- key: tipo_colegiado_outro
  block: detalhes
  type: text
  title: Especifique o tipo de colegiado
  size: 6
  show:
    target:
      key: tipo_colegiado
      value: 7

- key: nivel_atuacao
  block: detalhes
  type: options
  title: Nível de atuação
  size: 4
  list: 
    module: property
    key: nivel_atuacao

- key: nivel_atuacao_outro
  block: detalhes
  type: text
  title: Especifique o nível de atuação
  size: 6
  show:
    target:
      key: nivel_atuacao
      value: 4

- key: logo_arquivo
  block: detalhes2
  type: thumbnail
  title: Logotipo
  db_field: logo_arquivo
  size: 2

- key: uf_nome
  block: detalhes2
  type: read_only
  title: Estado
  size: 3

- key: regiao
  block: detalhes2
  type: read_only
  title: Região
  size: 3

- key: data_criacao
  block: detalhes2
  type: yearpicker
  title: Data da criação
  size: 3

- key: ativo
  block: detalhes2
  type: options
  title: Ativo
  size: 3
  options:
    - value: 1
      label: 'Sim'
    - value: 2
      label: 'Em reestruturação'
    - value: 3
      label: 'Não'

- key: link
  block: detalhes2
  type: text
  title: Link para o site
  size: 12

- key: documento_criacao
  block: documento
  type: text
  title: Título do documento de criação
  size: 4

- key: documento_criacao_tipo
  block: documento
  type: options
  title: Tipo de documento de criação
  size: 2
  onchange: # pode indicar um script (TODO)
    - key: documento_criacao_arquivo # pode indicar um script (TODO)
      value:
    - key: documento_criacao_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: documento_criacao_arquivo
  block: documento
  type: text
  title: Link para o documento de criação
  size: 6
  show:
    target:
      key: documento_criacao_tipo
      value: link

- key: documento_criacao_arquivo2
  block: documento
  type: file
  accept: application/pdf
  title: Arquivo de criação
  db_field: documento_criacao_arquivo
  size: 6
  show:
    target:
      key: documento_criacao_tipo
      value: file

- key: composicao_cadeiras_set_pub
  block: composicao
  type: integer
  title: Núm. cadeiras - setor público
  size: 3

- key: composicao_cadeiras_soc_civ
  block: composicao
  type: integer
  title: Núm. cadeiras - sociedade civil
  size: 3

- key: setor
  block: composicao_cadeiras_outros
  type: text
  title: Setor %index%
  size: 6

- key: cadeiras
  block: composicao_cadeiras_outros
  type: integer
  title: Cadeiras %index%
  size: 6

- key: coordenacao
  block: coordenacao_block
  type: options
  title: Tipo de órgão gestor
  size: 6
  list: 
    module: property
    key: tipo_coordenacao

- key: coordenacao_especifique
  block: coordenacao_block
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: coordenacao
      value: [4,6,7]

- key: nome
  block: coordenacao_quem
  type: text
  title: Nome %index%
  size: 6

- key: email
  block: coordenacao_quem
  type: text
  title: E-mail %index%
  size: 6

- key: telefone
  block: coordenacao_quem
  type: text
  title: Telefone %index%
  size: 6

- key: mandato_ini
  block: coordenacao_quem
  type: monthpicker
  title: Início do mandato %index%
  size: 6

- key: mandato_fim
  block: coordenacao_quem
  type: monthpicker
  title: Fim do mandato %index%
  size: 6

- key: regimento_interno_tem
  block: regimento_interno_block
  type: options
  title: Tem regimento?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: regimento_interno
  block: regimento_interno_tem_block
  type: text
  title: Título do regimento interno
  size: 12

- key: regimento_interno_tipo
  block: regimento_interno_tem_block
  type: options
  title: Tipo de documento de regimento
  size: 2
  onchange:
    - key: regimento_interno_arquivo
      value:
    - key: regimento_interno_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: regimento_interno_arquivo
  block: regimento_interno_tem_block
  type: text
  title: Link para o regimento interno
  size: 6
  show:
    target:
      key: regimento_interno_tipo
      value: link

- key: regimento_interno_arquivo2
  block: regimento_interno_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de regimento
  db_field: regimento_interno_arquivo
  size: 6
  show:
    target:
      key: regimento_interno_tipo
      value: file

- key: org_interna_periodicidade
  block: organizacao_interna
  type: options
  title: Periodicidade
  size: 6
  options:
    - value: 1
      label: Mensal
    - value: 2
      label: Bimestral
    - value: 3
      label: Semestral
    - value: 4
      label: Anual
    - value: 5
      label: Outro

- key: organizacao_interna_periodicidade_especifique
  block: organizacao_interna
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: org_interna_periodicidade
      value: 5

- key: organizacao_interna_estrutura_tem
  block: organizacao_interna
  type: options
  title: Possui câmaras técnicas ou grupos de trabalho?
  size: 6
  list: 
    module: property
    key: sim_nao

- key: organizacao_interna_estrutura_especifique
  block: organizacao_interna
  type: text
  title: Especifique
  size: 6
  show:
    target:
      key: organizacao_interna_estrutura_tem
      value: true

- key: ppea_tem
  block: ppea_block
  type: options
  title: Há Política Pública de EA?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: ppea_tipo
  block: ppea_tem_block
  type: options
  title: Tipo de documento de política pública
  size: 2
  onchange:
    - key: ppea_arquivo
      value:
    - key: ppea_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: ppea_arquivo
  block: ppea_tem_block
  type: text
  title: Link para a política pública
  size: 6
  show:
    target:
      key: ppea_tipo
      value: link

- key: ppea_arquivo2
  block: ppea_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de política pública
  db_field: ppea_arquivo
  size: 6
  show:
    target:
      key: ppea_tipo
      value: file

- key: ppea_decreto
  block: ppea_tem_block
  type: text
  title: Decreto
  size: 3

- key: ppea_lei
  block: ppea_tem_block
  type: text
  title: Lei
  size: 3

- key: ppea2_tem
  block: ppea2_block
  type: options
  title: Existe?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: ppea2_tipo
  block: ppea2_tem_block
  type: options
  title: Tipo de documento de política pública
  size: 2
  onchange:
    - key: ppea2_arquivo
      value:
    - key: ppea2_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: ppea2_arquivo
  block: ppea2_tem_block
  type: text
  title: Link para a política pública
  size: 6
  show:
    target:
      key: ppea2_tipo
      value: link

- key: ppea2_arquivo2
  block: ppea2_tem_block
  type: file
  accept: application/pdf
  title: Arquivo de política pública
  db_field: ppea2_arquivo
  size: 6
  show:
    target:
      key: ppea2_tipo
      value: file

- key: ppea2_decreto
  block: ppea2_tem_block
  type: text
  title: Decreto
  size: 3

- key: ppea2_lei
  block: ppea2_tem_block
  type: text
  title: Lei
  size: 3

- key: programa_estadual_tem
  block: programa_estadual_block
  type: options
  title: Acompanha?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: programa_estadual_tipo
  block: programa_estadual_tem_block
  type: options
  title: Tipo de documento
  size: 2
  onchange:
    - key: programa_estadual_arquivo
      value:
    - key: programa_estadual_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: programa_estadual_arquivo
  block: programa_estadual_tem_block
  type: text
  title: Link para o programa
  size: 6
  show:
    target:
      key: programa_estadual_tipo
      value: link

- key: programa_estadual_arquivo2
  block: programa_estadual_tem_block
  type: file
  accept: application/pdf
  title: Arquivo do programa
  db_field: programa_estadual_arquivo
  size: 6
  show:
    target:
      key: programa_estadual_tipo
      value: file

- key: programa_estadual_decreto
  block: programa_estadual_tem_block
  type: text
  title: Decreto
  size: 3

- key: programa_estadual_lei
  block: programa_estadual_tem_block
  type: text
  title: Lei
  size: 3

- key: plano_estadual_tem
  block: plano_estadual_block
  type: options
  title: Desdobrou?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: plano_estadual_tipo
  block: plano_estadual_tem_block
  type: options
  title: Tipo de documento
  size: 2
  onchange:
    - key: plano_estadual_arquivo
      value:
    - key: plano_estadual_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: plano_estadual_arquivo
  block: plano_estadual_tem_block
  type: text
  title: Link para o plano
  size: 6
  show:
    target:
      key: plano_estadual_tipo
      value: link

- key: plano_estadual_arquivo2
  block: plano_estadual_tem_block
  type: file
  accept: application/pdf
  title: Arquivo do plano
  db_field: plano_estadual_arquivo
  size: 6
  show:
    target:
      key: plano_estadual_tipo
      value: file

- key: plano_estadual_decreto
  block: plano_estadual_tem_block
  type: text
  title: Decreto
  size: 3

- key: plano_estadual_lei
  block: plano_estadual_tem_block
  type: text
  title: Lei
  size: 3

##

- key: ppea_outra_tem
  block: ppea_outra_block
  type: options
  title: Acompanha?
  size: 4
  list: 
    module: property
    key: sim_nao

- key: ppea_outra_tipo
  block: ppea_outra_tem_block
  type: options
  title: Tipo de documento
  size: 2
  onchange:
    - key: ppea_outra_arquivo
      value:
    - key: ppea_outra_arquivo2
      value:
  list: 
    module: property
    key: tipo_arquivo

- key: ppea_outra_arquivo
  block: ppea_outra_tem_block
  type: text
  title: Link para a política pública
  size: 6
  show:
    target:
      key: ppea_outra_tipo
      value: link

- key: ppea_outra_arquivo2
  block: ppea_outra_tem_block
  type: file
  accept: application/pdf
  title: Arquivo da política pública
  db_field: ppea_outra_arquivo
  size: 6
  show:
    target:
      key: ppea_outra_tipo
      value: file

- key: ppea_outra_decreto
  block: ppea_outra_tem_block
  type: text
  title: Decreto
  size: 3

- key: ppea_outra_lei
  block: ppea_outra_tem_block
  type: text
  title: Lei
  size: 3

################################################################

blocks:

  - key: detalhes
    title: Sobre o colegiado

  - key: detalhes2
    title: Detalhes do colegiado
  
  - key: documento
    title: Documento de criação

  - key: composicao
    title: Composição
    elements:
      - type: block # posicional para sem view, hierarquico para ambos 
        # TODO problema: sempre aparece como último elemento em relação aos campos com propriedade block preenchida
        key: composicao_cadeiras_outros

  - key: composicao_cadeiras_outros
    iterate:
      target: none
      index: default
      add: Adicionar setor
  
  - key: coordenacao_block
    title: Órgão Gestor

  - key: coordenacao_quem_block
    title: Coordenação
    elements:
      - type: block 
        key: coordenacao_quem

  - key: coordenacao_quem
    iterate:
      target: none
      index: default
      add: Adicionar coordenador

  - key: regimento_interno_block
    title: Regimento interno
    elements:
      - type: block
        key: regimento_interno_tem_block

  - key: regimento_interno_tem_block   
    show:
      target:
        key: regimento_interno_tem
        value: true

  - key: organizacao_interna
    title: Organização interna

  - key: ppea_block
    title: Identifique a Política Pública de EA que o colegiado acompanha em seu nível de atuação
    elements:
      - type: block
        key: ppea_tem_block

  - key: ppea_tem_block
    show:
      target:
        key: ppea_tem
        value: true

  - key: ppea2_block
    title: Existe Política Pública de Mudanças do Clima em seu nível de atuação?
    elements:
      - type: block
        key: ppea2_tem_block

  - key: ppea2_tem_block  
    show:
      target:
        key: ppea2_tem
        value: true
  
  - key: programa_estadual_block
    title: A política de EA que este colegiado acompanha se desdobrou em um Programa de EA?
    elements:
      - type: block
        key: programa_estadual_tem_block

  - key: programa_estadual_tem_block
    show:
      target:
        key: programa_estadual_tem
        value: true
  
  - key: plano_estadual_block
    title: A política de EA que este colegiado acompanha se desdobrou em um Plano de EA?     
    # show: # TODO este teste não funciona com VIEW
    #   target:
    #     key: programa_estadual_tem
    #     value: true
    elements:
      - type: block
        key: plano_estadual_tem_block

  - key: plano_estadual_tem_block  
    show:
      target:
        key: plano_estadual_tem
        value: true

  - key: ppea_outra_block
    title: O colegiado acompanha alguma outra política pública?
    elements:
      - type: block
        key: ppea_outra_tem_block

  - key: ppea_outra_tem_block
    show:
      target:
        key: ppea_outra_tem
        value: true

################################################################
# objetos livres não definida no protocolo, para fins de abastecer o servidor com mais informações

link_or_file_fields:
  - documento_criacao
  - regimento_interno
  - ppea
  - ppea2
  - programa_estadual
  - plano_estadual  
  - ppea_outra