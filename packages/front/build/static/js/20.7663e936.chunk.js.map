{"version":3,"sources":["components/PageTitle/PageTitle.js","components/PageTitle/PageTitle.module.scss","tools/NetworkHome/index.js"],"names":["PageTitle","title","className","styles","module","exports","NetworkHome","server","useDorothy","currentCommunity","useRouter","useSnackbar","enqueueSnackbar","closeSnackbar","useState","showNPDialog","_showNPDialog","mutation","create","useMutation","name","axios","post","id","nome","onSuccess","handleNProject","length","snackKey","persist","anchorOrigin","vertical","horizontal","mutateAsync","data","variant","window","location","communityId","console","error","onClick","style","padding","NewProjectDialog","open","onCreate","onClose","_name","useEffect","maxWidth","fullWidth","label","value","onChange","e","target","autoFocus"],"mappings":"2HAAA,+DAEaA,EAAY,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAAe,qBAAKC,UAAWC,IAAO,cAAvB,SAAuCF,M,oBCD/EG,EAAOC,QAAU,CAAC,aAAa,gC,iOCehB,SAASC,IACtB,IAAQC,EAAWC,cAAXD,OACAE,EAAqBC,cAArBD,iBAER,EAA2CE,cAAnCC,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,cAEzB,EAAsCC,oBAAS,GAA/C,mBAAOC,EAAP,KAAqBC,EAArB,KAEMC,EAAW,CACfC,OAAQC,uBAAY,SAAAC,GAAI,OAAIC,IAAMC,KAAN,UAAcf,EAAd,gCAA4CE,EAAiBc,IAAM,CAAEC,KAAMJ,MAAS,CAC9GK,UAAW,gBAMTC,EAAc,iDAAG,WAAMN,GAAN,wFAChBA,GAASA,EAAKO,OADE,wDAGfC,EAAWhB,EAAgB,yBAA0B,CACzDiB,SAAS,EACTC,aAAc,CACZC,SAAU,MACVC,WAAY,WAPK,kBAaIf,EAASC,OAAOe,YAAYb,GAbhC,gBAaXc,EAbW,EAaXA,KAERrB,EAAce,GAEdhB,EAAgB,kCAAmC,CACjDuB,QAAS,UACTL,aAAc,CACZC,SAAU,MACVC,WAAY,WAIhBhB,GAAc,GACdoB,OAAOC,SAAP,4BAAuCH,EAAKI,aA1BzB,kDA4BnBzB,EAAce,GAEdW,QAAQC,MAAR,MAEA5B,EAAgB,+BAAgC,CAC9CuB,QAAS,QACTL,aAAc,CACZC,SAAU,MACVC,WAAY,WApCG,0DAAH,sDA0CpB,OACE,qCACE,sBAAK9B,UAAU,qBAAf,UACE,sBAAKA,UAAU,cAAf,UACE,cAAC,IAAD,CAAWD,MAAO,kDAClB,qBAAKC,UAAU,sBAAf,SACE,wBAAQA,UAAU,iBAAiBuC,QAAS,kBAAMzB,GAAc,IAAhE,kCAMJ,qBAAKd,UAAU,eAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,WAAWwC,MAAO,CAAEC,QAAS,QAA5C,UACE,qJAGA,oHAMR,cAACC,EAAD,CAAkBC,KAAM9B,EAAc+B,SAAUpB,EAAgBqB,QAAS,kBAAM/B,GAAc,SAKnG,SAAS4B,EAAT,GAAwD,IAA5BC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,QAC1C,EAAsBjC,mBAAS,IAA/B,mBAAOM,EAAP,KAAa4B,EAAb,KAMA,OAJAC,qBAAU,WACJJ,GAAMG,EAAM,MACf,CAACH,IAGF,8BACE,eAAC,IAAD,CACEA,KAAMA,EACNE,QAASA,EACT,kBAAgB,qBAChB,mBAAiB,2BACjBG,SAAS,KACTC,WAAS,EANX,UAQE,cAAC,IAAD,CAAa5B,GAAG,qBAAhB,6BACA,cAAC,IAAD,UACE,qBAAKrB,UAAU,MAAf,SACE,qBAAKA,UAAU,YAAf,SACE,cAAC,IAAD,CACEA,UAAU,aACVkD,MAAM,0BACNC,MAAOjC,EACPkC,SAAU,SAAAC,GAAC,OAAIP,EAAMO,EAAEC,OAAOH,gBAKtC,eAAC,IAAD,WACE,cAAC,IAAD,CAAQZ,QAAS,kBAAMM,KAAWU,WAAS,EAA3C,sBAGA,wBAAQvD,UAAU,iBAAiBuC,QAAS,kBAAMK,EAAS1B,IAA3D","file":"static/js/20.7663e936.chunk.js","sourcesContent":["import styles from './PageTitle.module.scss';\n\nexport const PageTitle = ({ title }) => <div className={styles['page-title']}>{title}</div>;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page-title\":\"PageTitle_page-title__1MUJj\"};","import { useState, useEffect } from 'react';\nimport { TextField } from '@mui/material';\n\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Button from '@mui/material/Button';\n\nimport { useDorothy, useRouter } from 'dorothy-dna-react';\nimport axios from 'axios';\nimport { PageTitle } from '../../components/PageTitle/PageTitle';\nimport { useSnackbar } from 'notistack';\n\nimport { useMutation } from 'react-query';\n\nexport default function NetworkHome() {\n  const { server } = useDorothy();\n  const { currentCommunity } = useRouter();\n\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const [showNPDialog, _showNPDialog] = useState(false);\n\n  const mutation = {\n    create: useMutation(name => axios.post(`${server}project/?communityId=${currentCommunity.id}`, { nome: name }), {\n      onSuccess: () => {\n        // queryClient.invalidateQueries('project_indics');\n      },\n    }),\n  };\n\n  const handleNProject = async name => {\n    if (!name || !name.length) return;\n\n    const snackKey = enqueueSnackbar('Criando a iniciativa..', {\n      persist: true,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'right',\n      },\n    });\n\n    /* save */\n    try {\n      const { data } = await mutation.create.mutateAsync(name);\n\n      closeSnackbar(snackKey);\n\n      enqueueSnackbar('Iniciativa gravada com sucesso!', {\n        variant: 'success',\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right',\n        },\n      });\n\n      _showNPDialog(false);\n      window.location = `/colabora/projeto/${data.communityId}`; /* TODO: melhorar */\n    } catch (error) {\n      closeSnackbar(snackKey);\n\n      console.error(error);\n\n      enqueueSnackbar('Erro ao gravar a iniciativa!', {\n        variant: 'error',\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right',\n        },\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"page width-limiter\">\n        <div className=\"page-header\">\n          <PageTitle title={'Rede de Comunidades de Aprendizagem do PPPZCM'} />\n          <div className=\"page-header-buttons\">\n            <button className=\"button-primary\" onClick={() => _showNPDialog(true)}>\n              {/* <CheckCircle></CheckCircle> */}\n              Nova iniciativa\n            </button>\n          </div>\n        </div>\n        <div className=\"page-content\">\n          <div className=\"page-body\">\n            <div className=\"tablebox\" style={{ padding: '20px' }}>\n              <h4>\n                Esta é a página de entrada da área de colaboração da Rede de Comunidades de Aprendizagens do PPPZCM.\n              </h4>\n              <p>Para criar a sua iniciativa, clique no botão \"Nova iniciativa\" (acima)</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <NewProjectDialog open={showNPDialog} onCreate={handleNProject} onClose={() => _showNPDialog(false)} />\n    </>\n  );\n}\n\nfunction NewProjectDialog({ open, onCreate, onClose }) {\n  const [name, _name] = useState('');\n\n  useEffect(() => {\n    if (open) _name('');\n  }, [open]);\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle id=\"alert-dialog-title\">Nova iniciativa</DialogTitle>\n        <DialogContent>\n          <div className=\"row\">\n            <div className=\"col-xs-12\">\n              <TextField\n                className=\"input-text\"\n                label=\"Nome da nova iniciativa\"\n                value={name}\n                onChange={e => _name(e.target.value)}\n              />\n            </div>\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => onClose()} autoFocus>\n            Cancelar\n          </Button>\n          <button className=\"button-primary\" onClick={() => onCreate(name)}>\n            Criar\n          </button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n"],"sourceRoot":""}