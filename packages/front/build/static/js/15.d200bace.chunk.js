(this["webpackJsonpzcm-v2-frontend"]=this["webpackJsonpzcm-v2-frontend"]||[]).push([[15],{326:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(327),i=n.n(r),a=n(1),c=function(e){var t=e.title;return Object(a.jsx)("div",{className:i.a["page-title"],children:t})}},327:function(e,t,n){e.exports={"page-title":"PageTitle_page-title__1MUJj"}},333:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(){return Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(r.jsx)("polyline",{points:"3 6 5 6 21 6"}),Object(r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),Object(r.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),Object(r.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}},335:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(0);var r=n(251),i=n(255),a=n(253),c=n(245),l=n(250),o=n(1);function s(e){var t=e.open,n=e.title,s=e.content,u=e.cancelButtonText,d=void 0===u?"Cancelar":u,j=e.confirmButtonText,b=void 0===j?"Confirmar":j,f=e.onClose;return Object(o.jsx)("div",{children:Object(o.jsxs)(r.a,{open:t,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[n&&Object(o.jsx)(c.a,{id:"alert-dialog-title",children:n}),Object(o.jsx)(a.a,{children:s}),Object(o.jsxs)(i.a,{children:[Object(o.jsx)(l.a,{onClick:function(){return f("cancel")},autoFocus:!0,children:d}),Object(o.jsx)("button",{className:"button-primary",onClick:function(){return f("confirm")},children:b})]})]})})}},373:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(374),i=n.n(r),a=n(1);function c(e){var t=e.items,n=e.analytics,r=void 0!==n&&n;return Object(a.jsx)(a.Fragment,{children:t&&Object(a.jsxs)("ul",{children:[t.map((function(e){return Object(a.jsx)("li",{className:"".concat(i.a.item," ").concat(e.active?i.a.active:""),children:Object(a.jsx)("button",{disabled:e.active,className:i.a.item,onClick:function(){return e.onClick(e.id)},children:e.title})},e.id)})),r&&Object(a.jsx)("li",{className:"".concat(i.a.item),children:Object(a.jsx)("button",{className:i.a.item,onClick:function(){return window.open("https://analytics.google.com/analytics/web/?authuser=0#/p404312828/reports","analytics")},children:"Analytics"})})]})})}},374:function(e,t,n){e.exports={item:"styles_item__yhyRb"}},464:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(117),i=n(9),a=n(0),c=n(308),l=n(635),o=n(644),s=n(38),u=n(1);function d(e){var t=e.label,n=void 0===t?"Label":t,d=e.url,j=e.urlSingle,b=e.query,f=void 0===b?"":b,O=e.value,p=e.titleField,h=e.onChange,v=e.disabled,m=e.error,x=Object(a.useState)(!1),g=Object(i.a)(x,2),y=g[0],w=g[1],k=Object(a.useState)([]),C=Object(i.a)(k,2),E=C[0],S=C[1],_=Object(a.useState)(null),N=Object(i.a)(_,2),I=N[0],P=N[1],L=Object(s.useQuery)("".concat(j||d,"/").concat(O),{enabled:!!O}),B=L.data,W=L.isLoading,R=Object(s.useQuery)("".concat(d,"/").concat(f),{enabled:y}),M=R.data,F=R.isLoading;Object(a.useEffect)((function(){S(M?M.list:[])}),[M]),Object(a.useEffect)((function(){O||P(null)}),[O]),Object(a.useEffect)((function(){B&&P(B)}),[B]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.a,{className:"input-autocomplete",id:"asynchronous-demo",disabled:v,open:y,onOpen:function(){w(!0)},onClose:function(){w(!1)},onChange:function(e,t){P(t),h(t?t.id:null)},value:I,isOptionEqualToValue:function(e,t){return e.id===t.id},getOptionLabel:function(e){return p?e[p]:e.name},options:E,noOptionsText:"Nenhuma op\xe7\xe3o",loading:W||F,renderInput:function(e){return Object(u.jsx)(c.a,Object(r.a)(Object(r.a)({},e),{},{label:n,error:m,InputProps:Object(r.a)(Object(r.a)({},e.InputProps),{},{endAdornment:Object(u.jsxs)(a.Fragment,{children:[W||F?Object(u.jsx)(o.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})})}},483:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1);function i(){return Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Object(r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}},556:function(e,t,n){e.exports={controls:"styles_controls__O5MFG"}},633:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Qe}));var r,i,a=n(117),c=n(118),l=n(17),o=n(24),s=n(9),u=n(0),d=n(638),j=n(642),b=n(332),f=n(326),O=n(483),p=n(333),h=["title","titleId"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function x(e,t){var n=e.title,a=e.titleId,c=m(e,h);return u.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-corner-right-down",ref:t,"aria-labelledby":a},c),n?u.createElement("title",{id:a},n):null,r||(r=u.createElement("polyline",{points:"10 15 15 20 20 15"})),i||(i=u.createElement("path",{d:"M4 4h7a4 4 0 0 1 4 4v12"})))}var g,y,w=u.forwardRef(x),k=(n.p,["title","titleId"]);function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S(e,t){var n=e.title,r=e.titleId,i=E(e,k);return u.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-plus",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,g||(g=u.createElement("line",{x1:12,y1:5,x2:12,y2:19})),y||(y=u.createElement("line",{x1:5,y1:12,x2:19,y2:12})))}var _,N,I=u.forwardRef(S),P=(n.p,["title","titleId"]);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W(e,t){var n=e.title,r=e.titleId,i=B(e,P);return u.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-down",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,_||(_=u.createElement("line",{x1:12,y1:5,x2:12,y2:19})),N||(N=u.createElement("polyline",{points:"19 12 12 19 5 12"})))}var R,M,F=u.forwardRef(W),Q=(n.p,["title","titleId"]);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T(e,t){var n=e.title,r=e.titleId,i=A(e,Q);return u.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-up",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,R||(R=u.createElement("line",{x1:12,y1:19,x2:12,y2:5})),M||(M=u.createElement("polyline",{points:"5 12 12 5 19 12"})))}var z,G,V=u.forwardRef(T),H=(n.p,["title","titleId"]);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function U(e,t){var n=e.title,r=e.titleId,i=D(e,H);return u.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevrons-left",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,z||(z=u.createElement("polyline",{points:"11 17 6 12 11 7"})),G||(G=u.createElement("polyline",{points:"18 17 13 12 18 7"})))}var K,X=u.forwardRef(U),Y=(n.p,n(16)),Z=n(373),$=n(38),ee=n(19),te=n.n(ee),ne=n(35),re=n(335),ie=["title","titleId"];function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function le(e,t){var n=e.title,r=e.titleId,i=ce(e,ie);return u.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-right",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,K||(K=u.createElement("polyline",{points:"9 18 15 12 9 6"})))}var oe,se=u.forwardRef(le),ue=(n.p,["title","titleId"]);function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function be(e,t){var n=e.title,r=e.titleId,i=je(e,ue);return u.createElement("svg",de({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-down",ref:t,"aria-labelledby":r},i),n?u.createElement("title",{id:r},n):null,oe||(oe=u.createElement("polyline",{points:"6 9 12 15 18 9"})))}var fe=u.forwardRef(be),Oe=(n.p,n(627)),pe=n(636),he=n(5),ve=n(251),me=n(245),xe=n(253),ge=n(309),ye=n(306),we=n(305),ke=n(308),Ce=n(491),Ee=n(569),Se=n(255),_e=n(250),Ne=n(140),Ie=n(464),Pe=n(568),Le=n(1),Be={type:"none",title:"",link:"null",content_id:null,order:null,blank:!1,parent_id:null},We=[{id:"none",title:"Nenhum"},{id:"link",title:"Link"},{id:"page",title:"P\xe1gina"}];function Re(e){var t=e.open,n=e.id,r=e.onClose,i=e.onSave,c=e.newParentId,d=e.newOrder,j=Object(Y.e)().server,b=Object(Y.g)().currentCommunity,f=Object($.useQueryClient)(),O=Object(ne.b)(),p=O.enqueueSnackbar,h=O.closeSnackbar,v=Object(u.useState)(Be),m=Object(s.a)(v,2),x=m[0],g=m[1],y=Object(u.useState)(Be),w=Object(s.a)(y,2),k=w[0],C=w[1],E=Object(u.useState)(!1),S=Object(s.a)(E,2),_=S[0],N=S[1],I=Object(u.useState)({}),P=Object(s.a)(I,2),L=P[0],B=P[1],W=Object(u.useState)(!1),R=Object(s.a)(W,2),M=R[0],F=R[1],Q=Object($.useQuery)("menu_portal/".concat(n),{enabled:!!n&&"novo"!==n}).data,q=Object($.useMutation)((function(e){return e.communityId=b.id,e.id?te.a.put("".concat(j,"menu_portal/").concat(e.id),e):te.a.post("".concat(j,"menu_portal"),e)}),{onSuccess:function(){return f.invalidateQueries("menu_tree")}});Object(u.useEffect)((function(){N(!1),B({});var e=Object(a.a)({},Be);"novo"===n&&(e.parent_id=c,e.order=d),g(e),C(e)}),[n,c,d]),Object(u.useEffect)((function(){Q&&(g(Q),C(Q))}),[Q]);var A=function(e){return function(t){N(!0);var n=Object(a.a)(Object(a.a)({},x),{},Object(he.a)({},e,t));console.log("changing ".concat(e,":"),t,n),g(n)}},T=function(){var e=Object(o.a)(Object(l.a)().mark((function e(){var t,n,r,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!1),n=!1,r={},x.title||(r.title=!0,n=!0),"link"!==x.type||null!==(t=x.link)&&void 0!==t&&t.length||(r.link=!0,n=!0),"page"!==x.type||x.content_id||(r.content_id=!0,n=!0),!n){e.next=9;break}return B(r),e.abrupt("return");case 9:return e.prev=9,a=p("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}}),e.next=13,q.mutateAsync(x);case 13:h(a),i(!Pe.a.isEqual(k,x)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(){return e.apply(this,arguments)}}();return Object(Le.jsxs)("div",{children:[Object(Le.jsxs)(ve.a,{id:"menu_item",className:"modal",open:t,maxWidth:"sm",scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(Le.jsxs)(me.a,{id:"scroll-dialog-title",children:[n&&"novo"!==n?"Editar":"Adicionar"," item de menu"]}),Object(Le.jsxs)(xe.a,{dividers:!0,children:[Object(Le.jsxs)("div",{className:"row",children:[Object(Le.jsx)("div",{className:"col-md-5",children:Object(Le.jsx)(ge.a,{fullWidth:!0,children:Object(Le.jsx)(ye.a,{className:"input-select",value:x.type,onChange:function(e){return A("type")(e.target.value)},children:We.map((function(e){return Object(Le.jsxs)(we.a,{value:e.id,children:[" ",e.title," "]},e.id)}))})})}),Object(Le.jsx)("div",{className:"col-md-7",children:Object(Le.jsx)(ke.a,{className:"input-text",label:"T\xedtulo",placeholder:"10",shrink:"false",value:x.title,onChange:function(e){return A("title")(e.target.value)},error:!_&&L.title})})]}),Object(Le.jsxs)("div",{className:"row",children:["link"===x.type&&Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("div",{className:"col-md-9",children:Object(Le.jsx)(ke.a,{className:"input-text",label:"Link",placeholder:"10",shrink:"false",value:x.link||"",onChange:function(e){return A("link")(e.target.value)},error:!_&&L.link})}),Object(Le.jsx)("div",{className:"col-md-3",children:Object(Le.jsx)(ge.a,{fullWidth:!0,children:Object(Le.jsx)(Ce.a,{control:Object(Le.jsx)(Ee.a,{checked:x.blank,onChange:function(e,t){return A("blank")(t)}}),label:"Nova aba?"})})})]}),"page"===x.type&&Object(Le.jsx)("div",{className:"col-md-12",children:Object(Le.jsx)(Ie.a,{label:"Conte\xfados de p\xe1gina",url:"content/related",urlSingle:"content",titleField:"title",query:"?type=page",onChange:function(e){return A("content_id")(e)},value:x.content_id,error:!_&&L.content_id})})]})]}),Object(Le.jsxs)(Se.a,{children:[Object(Le.jsx)(_e.a,{onClick:function(){return T()},children:"gravar"}),Object(Le.jsx)(_e.a,{onClick:function(){Pe.a.isEqual(k,x)?r():F(!0)},children:"cancelar"})]})]}),Object(Le.jsx)(Ne.a,{open:M,content:"Voc\xea deseja sair sem gravar as altera\xe7\xf5es?",confirmButtonText:"Descartar altera\xe7\xf5es",onClose:function(e){F(!1),"confirm"===e&&r()}})]})}var Me=n(556),Fe=n.n(Me);function Qe(){var e=Object(Y.e)().server,t=Object(Y.g)(),n=t.changeRoute,r=t.params,i=Object($.useQueryClient)(),h=Object(ne.b)(),v=h.enqueueSnackbar,m=h.closeSnackbar,x=Object(u.useState)(null),g=Object(s.a)(x,2),y=g[0],k=g[1],C=Object(u.useState)(null),E=Object(s.a)(C,2),S=E[0],_=E[1],N=Object(u.useState)(0),P=Object(s.a)(N,2),L=P[0],B=P[1],W=Object(u.useState)(null),R=Object(s.a)(W,2),M=R[0],Q=R[1],q=Object(u.useState)(null),A=Object(s.a)(q,2),T=A[0],z=A[1],G=Object(u.useState)(!1),H=Object(s.a)(G,2),J=H[0],D=H[1],U=Object(u.useState)(!1),K=Object(s.a)(U,2),ee=K[0],ie=K[1],ae=Object(u.useState)(null),ce=Object(s.a)(ae,2),le=ce[0],oe=ce[1],ue=Object(u.useState)(null),de=Object(s.a)(ue,2),je=de[0],be=de[1],he=Object($.useQuery)(["menu_tree"],{queryFn:function(){var t=Object(o.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.a.get("".concat(e,"menu_portal"));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),ve=he.data;Object(u.useEffect)((function(){r&&(r.length?k(r[0]):k(null))}),[r]),Object(u.useEffect)((function(){if(ve){var e,t=[],n=0,r=Object(c.a)(ve.filter((function(e){return!e.parent_id})));try{var i=function(){var r=e.value;n++,t.push(Object(a.a)(Object(a.a)({},r),{},{children:ve.filter((function(e){return e.parent_id===r.id}))}))};for(r.s();!(e=r.n()).done;)i()}catch(l){r.e(l)}finally{r.f()}_(t),B(n)}}),[ve]),Object(u.useEffect)((function(){if(T)if(T.parent_id){var e=S.find((function(e){return e.id===T.parent_id})),t=e.children.findIndex((function(e){return e.id===T.id}));D(0===t),ie(t===e.total_children-1)}else{var n=S.findIndex((function(e){return e.id===T.id}));D(0===n),ie(n===L-1),D(0===n)}}),[T,S,L]);var me={remove:Object($.useMutation)((function(){return te.a.delete("".concat(e,"menu_portal/").concat(T.id))}),{onSuccess:function(){return i.invalidateQueries("menu_tree")}}),move:Object($.useMutation)((function(t){return te.a.put("".concat(e,"menu_portal/").concat(T.id,"/").concat(t))}),{onSuccess:function(){return i.invalidateQueries("menu_tree")}}),moveOut:Object($.useMutation)((function(t){return te.a.put("".concat(e,"menu_portal/").concat(T.id,"/out"),{order:t})}),{onSuccess:function(){return i.invalidateQueries("menu_tree")}})},xe=function(e){return function(){"sibling"===e?(oe(T.parent_id),be(T.order+1)):(oe(T.id),be(T.total_children)),n({params:["novo"]})}},ge=function(){var e=Object(o.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!==t){e.next=11;break}return e.prev=1,n=v("Removendo...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}}),e.next=5,me.remove.mutateAsync();case 5:m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:Q(null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(e){return Object(o.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.move.mutateAsync(e);case 2:case"end":return t.stop()}}),t)})))},we=function(){var e=Object(o.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.moveOut.mutateAsync(L);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)("div",{className:"page tbox-fixed",children:[Object(Le.jsx)("div",{className:"page-header",children:Object(Le.jsx)(f.a,{title:"Gest\xe3o de Menu"})}),Object(Le.jsxs)("div",{className:"page-content",children:[Object(Le.jsx)("div",{className:"page-sidebar",children:Object(Le.jsx)("div",{className:"sidebar-body",children:Object(Le.jsx)(Y.d,{submenu:!0,children:Object(Le.jsx)(Z.a,{})})})}),Object(Le.jsxs)("div",{className:"page-body",children:[Object(Le.jsxs)("div",{className:Fe.a.controls,children:[Object(Le.jsx)(d.a,{title:"Criar item irm\xe3o",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:xe("sibling"),disabled:!T,children:Object(Le.jsx)(I,{})})})}),Object(Le.jsx)(d.a,{title:"Criar filho",children:Object(Le.jsx)("div",{children:Object(Le.jsxs)(j.a,{onClick:xe("child"),disabled:!T||!(null===T||void 0===T||!T.parent_id),children:[Object(Le.jsx)(I,{}),Object(Le.jsx)(w,{})]})})}),"  ",Object(Le.jsx)(d.a,{title:"Editar",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:function(){return n({params:[T.id]})},disabled:!T,children:Object(Le.jsx)(O.a,{})})})}),Object(Le.jsx)(d.a,{title:"Remover",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:function(){Q(T.id)},disabled:!T||0!==(null===T||void 0===T?void 0:T.total_children),children:Object(Le.jsx)(p.a,{})})})})," ",Object(Le.jsx)(d.a,{title:"Para cima",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:ye("up"),disabled:!T||J,children:Object(Le.jsx)(V,{})})})})," ",Object(Le.jsx)(d.a,{title:"Para baixo",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:ye("down"),disabled:!T||ee,children:Object(Le.jsx)(F,{})})})})," ",Object(Le.jsx)(d.a,{title:"Para raiz",children:Object(Le.jsx)("div",{children:Object(Le.jsx)(j.a,{onClick:we,disabled:!(null!==T&&void 0!==T&&T.parent_id),children:Object(Le.jsx)(X,{})})})})," "]}),Object(Le.jsx)("hr",{}),S&&Object(Le.jsx)(b.a,{sx:{minHeight:180,flexGrow:1,maxWidth:300},children:Object(Le.jsx)(Oe.a,{"aria-label":"file system navigator",defaultCollapseIcon:Object(Le.jsx)(fe,{}),defaultExpandIcon:Object(Le.jsx)(se,{}),selected:(null===T||void 0===T?void 0:T.id)||"",onNodeSelect:function(e,t){var n=ve.find((function(e){return String(e.id)===t}));z(n)},children:S.map((function(e){return Object(Le.jsx)(pe.a,{nodeId:String(e.id),label:e.title,children:!!e.children.length&&e.children.map((function(e){return Object(Le.jsx)(pe.a,{nodeId:String(e.id),label:e.title},e.id)}))},e.id)}))})})]})]}),Object(Le.jsx)(re.a,{open:!!M,content:"Confirma a remo\xe7\xe3o desta item?",confirmButtonText:"Remover",onClose:ge})]}),Object(Le.jsx)(Re,{open:!!y,id:y,onClose:function(){return n({params:[]})},onSave:function(){return n({params:[]})},newParentId:le,newOrder:je})]})}}}]);
//# sourceMappingURL=15.d200bace.chunk.js.map