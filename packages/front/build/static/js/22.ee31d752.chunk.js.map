{"version":3,"sources":["images/robot.png","../node_modules/@mui/system/esm/createBox.js","../node_modules/@mui/material/Box/Box.js","tools/notifications/IndicationNotification.module.scss","tools/notifications/IndicationNotification.js"],"names":["_excluded","Box","options","defaultTheme","defaultClassName","generateClassName","styleFunctionSx","defaultStyleFunctionSx","BoxRoot","styled","React","inProps","ref","theme","useTheme","_extendSxProp","extendSxProp","className","component","other","_objectWithoutPropertiesLoose","_jsx","_extends","as","clsx","createBox","createTheme","ClassNameGenerator","generate","module","exports","NewUserNotification","data","server","useDorothy","useSnackbar","enqueueSnackbar","closeSnackbar","queryClient","useQueryClient","useState","date","_date","answered","_answered","answering","_answering","useQuery","sourceProjectId","content","type","sourceDraftId","indicationId","queryFn","axios","get","enabled","answerData","mutations","sendAgreement","useMutation","agreement","put","useEffect","invalidateQueries","dayjs","createdAt","format","answer","agree","snackKey","persist","anchorOrigin","vertical","horizontal","mutateAsync","variant","console","error","sx","padding","marginTop","backgroundColor","position","zIndex","minHeight","width","boxShadow","borderRadius","display","justifyContent","src","robot","alt","height","marginLeft","fontWeight","fontSize","styles","mainDiv","sourceProjectName","actions","size","disabled","onClick"],"mappings":"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","file":"static/js/22.ee31d752.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/robot.cdf24279.png\";","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport defaultStyleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox(options = {}) {\n  const {\n    defaultTheme,\n    defaultClassName = 'MuiBox-root',\n    generateClassName,\n    styleFunctionSx = defaultStyleFunctionSx\n  } = options;\n  const BoxRoot = styled('div')(styleFunctionSx);\n  const Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    const theme = useTheme(defaultTheme);\n\n    const _extendSxProp = extendSxProp(inProps),\n          {\n      className,\n      component = 'div'\n    } = _extendSxProp,\n          other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  return Box;\n}","import { createBox } from '@mui/system';\nimport PropTypes from 'prop-types';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../className';\nimport { createTheme } from '../styles';\nconst defaultTheme = createTheme();\nconst Box = createBox({\n  defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nprocess.env.NODE_ENV !== \"production\" ? Box.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * @ignore\n   */\n  children: PropTypes.node,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Box;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainDiv\":\"IndicationNotification_mainDiv__AdUr3\",\"actions\":\"IndicationNotification_actions__1b_PI\"};","import React, { useState, useEffect } from 'react';\n\nimport dayjs from 'dayjs';\nimport { Box } from '@mui/material';\nimport robot from '../../images/robot.png';\n\nimport styles from './IndicationNotification.module.scss';\n\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport axios from 'axios';\n\nimport { useDorothy } from 'dorothy-dna-react';\n\nimport { useSnackbar } from 'notistack';\n\nexport default function NewUserNotification({ data }) {\n    const { server } = useDorothy();\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    const queryClient = useQueryClient();\n\n    const [date, _date] = useState('');\n    const [answered, _answered] = useState(null);\n    const [answering, _answering] = useState(false);\n\n    const { data: answerData } = useQuery(['indic_notif', { \n        sourceProjectId: data.content.sourceProjectId,\n        type: data.content.type,\n        sourceDraftId: data.content.sourceDraftId,\n        indicationId: data.content.indicationId,\n     }], {\n        queryFn: async () => (await axios.get(`${server}project/${data.content.sourceProjectId}/relation/agreement/${data.content.type}/${data.content.sourceDraftId}/${data.content.indicationId}`)).data,\n        enabled: !!data.content,\n    });\n\n    const mutations = {\n        sendAgreement: useMutation(\n            (agreement) => {\n                return axios.put(`${server}project/${data.content.sourceProjectId}/relation/agreement`, { ...data.content, agreement });\n            },\n        ),\n    }\n\n    useEffect(() => {\n        if (!data) return;\n\n        queryClient.invalidateQueries('indic_notif')\n\n        _date(dayjs(data.createdAt).format('DD/MM/YYYY HH:mm'));\n    }, [data, queryClient]);\n\n    useEffect(() => {\n        if (!!answerData) _answered(answerData.agreement)\n    }, [answerData])\n\n    const answer = async (agree) => {\n        _answering(true);\n        const snackKey = enqueueSnackbar('Enviando resposta...', {\n            /* variant: 'info', */\n            /* hideIconVariant: true, */\n            persist: true,\n            anchorOrigin: {\n                vertical: 'top',\n                horizontal: 'center',\n            },\n        });\n\n        try {\n            await mutations.sendAgreement.mutateAsync(agree);\n\n            closeSnackbar(snackKey);\n\n            enqueueSnackbar('Envio efetuado com sucesso!', {\n                variant: 'success',\n                anchorOrigin: {\n                    vertical: 'top',\n                    horizontal: 'right',\n                },\n            });\n        } catch (error) {\n            closeSnackbar(snackKey);\n\n            console.error(error);\n\n            enqueueSnackbar('Erro ao enviar a resposta!', {\n                variant: 'error',\n                anchorOrigin: {\n                    vertical: 'top',\n                    horizontal: 'right',\n                },\n            });\n        } finally {\n\n            _answering(false);\n        }\n    }\n\n    return (\n        <Box\n            sx={{\n                padding: '24px',\n                marginTop: '48px',\n                backgroundColor: 'white',\n                position: 'relative',\n                zIndex: '1',\n                minHeight: '100px',\n                width: '100%',\n                boxShadow: '0px 0px 8px #0000001A',\n                borderRadius: '8px',\n            }}\n        >\n            <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                <Box sx={{ display: 'flex' }}>\n                    <Box\n                        as=\"img\"\n                        src={robot}\n                        alt=\"salve\"\n                        sx={{ borderRadius: '50%', width: '48px', height: '48px' }}\n                    />\n                    <Box sx={{ marginLeft: '8px' }}>\n                        <Box sx={{ fontWeight: 'bold', fontSize: '16px' }}>\n                            Sua iniciativa foi indicada\n                        </Box>\n                        <Box sx={{ fontSize: '14px' }}>{date}</Box>\n                    </Box>\n                </Box>\n                {/* <Box>\n            <ArrowRightCircle size=\"32px\" />\n          </Box> */}\n            </Box>\n            <Box sx={{ marginTop: '8px' }}>\n                {/* {JSON.stringify(data)} */}\n\n                <div className={styles.mainDiv}>\n                    <div>\n                        A iniciativa \"{data.content.sourceProjectName}\" indicou que sua iniciativa\n                        {data.content.type === 'apoia' && <span> é uma de suas apoiadoras.</span>}\n                        {data.content.type === 'apoiada' && <span> é apoiada por ela.</span>}\n                    </div>\n                    {answered === null && <div className={styles.actions}>\n\n                        <button className='button-primary' size=\"small\" disabled={answering} onClick={() => answer(true)}>Sim, reconheço</button>\n                        <button className='button-outline' size=\"small\" disabled={answering} onClick={() => answer(false)}>Não reconheço</button>\n\n                    </div>}\n                </div>\n            </Box>\n        </Box>\n    )\n}"],"sourceRoot":""}