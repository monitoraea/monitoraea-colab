(this["webpackJsonpzcm-v2-frontend"]=this["webpackJsonpzcm-v2-frontend"]||[]).push([[21],{332:function(e,t,a){"use strict";var n=a(2),c=a(3),s=a(0),o=a(8),r=a(119),i=a(292),l=a(299),u=a(83),d=a(1),j=["className","component"];var b=a(241),p=a(172),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,a=e.defaultClassName,b=void 0===a?"MuiBox-root":a,p=e.generateClassName,m=e.styleFunctionSx,x=void 0===m?i.a:m,h=Object(r.a)("div")(x),O=s.forwardRef((function(e,a){var s=Object(u.a)(t),r=Object(l.a)(e),i=r.className,m=r.component,x=void 0===m?"div":m,O=Object(c.a)(r,j);return Object(d.jsx)(h,Object(n.a)({as:x,ref:a,className:Object(o.a)(i,p?p(b):b),theme:s},O))}));return O}({defaultTheme:Object(p.a)(),defaultClassName:"MuiBox-root",generateClassName:b.a.generate});t.a=m},561:function(e,t,a){e.exports={mainDiv:"styles_mainDiv__1_bjB",error:"styles_error__3zj3L",actions:"styles_actions__19lBf",community:"styles_community__3x1Rv",maxh:"styles_maxh__1F8PL",title:"styles_title__19EEO",status:"styles_status__32RWl",closed:"styles_closed__LHyGv",text:"styles_text__3B-pE"}},613:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(17),c=a(24),s=a(9),o=a(0),r=a(135),i=a.n(r),l=a(16),u=a(332),d=a(561),j=a.n(d),b=a(38),p=a(19),m=a.n(p),x=a(35),h=a(1),O={informacao:"Informa\xe7\xf5es",conexoes:"Conex\xf5es",indicadores:"Indicadores",atuacao:"Atua\xe7\xe3o"};function f(e){var t=e.data,a=Object(l.g)(),r=a.getCommunityData,d=a.changeRoute,p=a.currentCommunity,f=Object(l.e)().server,_=Object(x.b)(),y=_.enqueueSnackbar,g=_.closeSnackbar,N=Object(b.useQueryClient)(),w=Object(o.useState)(""),C=Object(s.a)(w,2),k=C[0],z=C[1],S=Object(o.useState)(""),A=Object(s.a)(S,2),I=A[0],R=A[1],D=Object(o.useState)(""),M=Object(s.a)(D,2),E=M[0],B=M[1],F=Object(o.useState)("..."),H=Object(s.a)(F,2),L=H[0],Q=H[1],T=Object(o.useState)(!1),Y=Object(s.a)(T,2),P=Y[0],q=Y[1],J=Object(b.useQuery)(["help_status_".concat(t.content.help_id),{helpId:t.content.help_id}],{queryFn:function(){var e=Object(c.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(f,"help/").concat(t.content.help_id));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:!!t.content}),W=J.data;Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(Object(n.a)().mark((function e(){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t.content.communityId);case 2:a=e.sent,Q(a?a.name:"?");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(z(i()(t.createdAt).format("DD [de] MMMM [de] YYYY [\xe0s] HH:mm")),R(t.user_name),B(t.user_id),function(){e.apply(this,arguments)}())}),[t,f,r]),Object(o.useEffect)((function(){t&&N.invalidateQueries("help_status_".concat(t.content.help_id))}),[t,N]);var G={close:Object(b.useMutation)((function(){return m.a.put("".concat(f,"help/").concat(t.content.help_id,"/close"),{communityId:t.content.communityId})}),{onSuccess:function(){N.invalidateQueries("help_status_".concat(t.content.help_id))}})},K=function(){d({community:t.content.communityId,tool:"projeto",params:[t.content.tab]})},U=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),t=y("Resolvendo pedido de ajuda...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),e.prev=2,e.next=5,G.close.mutateAsync();case 5:g(t),y("Pedido de ajuda resolvido com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),g(t),q(!1),console.error(e.t0),y("Erro ao resolver pedido de ajuda!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(u.a,{sx:{padding:"24px",marginTop:"48px",backgroundColor:"white",position:"relative",zIndex:"1",minHeight:"100px",width:"100%",boxShadow:"0px 0px 8px #0000001A",borderRadius:"8px"},children:[Object(h.jsx)(u.a,{sx:{display:"flex",justifyContent:"space-between"},children:Object(h.jsxs)(u.a,{sx:{display:"flex"},children:[Object(h.jsx)(u.a,{as:"img",src:"".concat(f,"user/").concat(E,"/thumb"),alt:"salve",sx:{borderRadius:"50%",width:"48px",height:"48px"}}),Object(h.jsxs)(u.a,{sx:{marginLeft:"8px"},children:[Object(h.jsx)(u.a,{sx:{fontWeight:"bold",fontSize:"16px"},children:Object(h.jsxs)("div",{className:j.a.title,children:["Pedido de Ajuda",Object(h.jsx)(v,{status:W})]})}),Object(h.jsx)(u.a,{sx:{fontSize:"14px"},children:k})]})]})}),Object(h.jsxs)(u.a,{sx:{marginTop:"8px"},children:["projeto"!==p.alias&&Object(h.jsxs)("div",{className:j.a.mainDiv,children:[Object(h.jsxs)("div",{children:[I," de ",Object(h.jsxs)("span",{className:j.a.community,onClick:K,children:['"',L,'"']}),Object(h.jsxs)("span",{children:[" pediu uma ajuda para a aba ",Object(h.jsxs)("span",{className:j.a.field,children:['"',O[t.content.tab],'"']})]}),", com o seguinte texto: ",Object(h.jsxs)("span",{className:j.a.text,children:['"',t.content.text,'"']})]}),t&&Object(h.jsxs)("div",{className:j.a.actions,children:[Object(h.jsx)("button",{className:"button-outline",size:"small",onClick:K,children:"Acessar"}),W&&!W.closedAt&&Object(h.jsx)("button",{className:"button-primary",disabled:P,size:"small",onClick:U,children:"Resolvido"})]})]}),"projeto"===p.alias&&Object(h.jsxs)("div",{className:j.a.mainDiv,children:[Object(h.jsxs)("div",{children:[I," pediu uma ajuda para a aba ",Object(h.jsxs)("span",{className:j.a.field,children:['"',O[t.content.tab],'"']}),", com o seguinte texto: ",Object(h.jsxs)("span",{className:j.a.text,children:['"',t.content.text,'"']})]}),t&&W&&!W.closedAt&&Object(h.jsx)("div",{className:j.a.actions,children:Object(h.jsx)("button",{className:"button-primary",size:"small",onClick:K,children:"Acessar"})})]})]})]})}function v(e){var t=e.status;return t?Object(h.jsx)("div",{className:"".concat(j.a.status," ").concat(t.closedAt?j.a.closed:""),children:t.closedAt?"resolvido":"aberto"}):Object(h.jsx)(h.Fragment,{})}}}]);
//# sourceMappingURL=21.1b5b5fb3.chunk.js.map