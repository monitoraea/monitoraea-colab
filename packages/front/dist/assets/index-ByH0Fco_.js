import{u as m,b as x,c as g,r as l,f as v,j as a,D as j,k as p,l as b,T as N,m as f,B as y,n as C}from"./index-B3sBGDZf.js";import{P}from"./PageTitle-KXdbeJtP.js";function S(){const{server:i}=m(),{currentCommunity:n}=x(),{enqueueSnackbar:e,closeSnackbar:t}=g(),[o,s]=l.useState(!1),u={create:v(r=>C.post(`${i}project/?communityId=${n.id}`,{nome:r}),{onSuccess:()=>{}})},h=async r=>{if(!r||!r.length)return;const d=e("Criando a iniciativa..",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});try{const{data:c}=await u.create.mutateAsync(r);t(d),e("Iniciativa gravada com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),s(!1),window.location=`/colabora/projeto/${c.communityId}`}catch(c){t(d),console.error(c),e("Erro ao gravar a iniciativa!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"page width-limiter",children:[a.jsxs("div",{className:"page-header",children:[a.jsx(P,{title:""}),a.jsx("div",{className:"page-header-buttons",children:a.jsx("button",{className:"button-primary",onClick:()=>s(!0),children:"Nova iniciativa"})})]}),a.jsx("div",{className:"page-content",children:a.jsx("div",{className:"page-body",children:a.jsxs("div",{className:"tablebox",style:{padding:"20px"},children:[a.jsx("h4",{children:"Esta é a página de entrada da área de colaboração da Rede de Comunidades de Aprendizagens do PPPZCM."}),a.jsx("p",{children:'Para criar a sua iniciativa, clique no botão "Nova iniciativa" (acima)'})]})})})]}),a.jsx(k,{open:o,onCreate:h,onClose:()=>s(!1)})]})}function k({open:i,onCreate:n,onClose:e}){const[t,o]=l.useState("");return l.useEffect(()=>{i&&o("")},[i]),a.jsx("div",{children:a.jsxs(j,{open:i,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"md",fullWidth:!0,children:[a.jsx(p,{id:"alert-dialog-title",children:"Nova iniciativa"}),a.jsx(b,{children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-xs-12",children:a.jsx(N,{className:"input-text",label:"Nome da nova iniciativa",value:t,onChange:s=>o(s.target.value)})})})}),a.jsxs(f,{children:[a.jsx(y,{onClick:()=>e(),autoFocus:!0,children:"Cancelar"}),a.jsx("button",{className:"button-primary",onClick:()=>n(t),children:"Criar"})]})]})})}export{S as default};
