import{aH as T,r as h,j as e,aI as D,g as L,S as w,M as q,e as m,ag as E}from"./index-Bt2dc8oQ.js";import{P as V}from"./PageTitle-sSwpJkJW.js";import{L as W,A as C,I as A}from"./index-BPEKB_09.js";import{u as j,l as z,_,T as y,H as b,a as $,p as g,h as k}from"./index-BvCIZ9Pr.js";import{S as O}from"./index-7hYX3QkX.js";import{C as v}from"./index-tjP0QGq2.js";import{N as Q}from"./react-number-format.es-DbKIUXmk.js";import{a as H}from"./CircularProgress-B6xarsSL.js";import"./index-BrB1sgMj.js";import"./Popper-Bw8nTH4X.js";const P="_backdrop_1fy0l_8",R="_divisor_1fy0l_56",B="_cleanfilters_1fy0l_62",G="_disabled_1fy0l_103",J="_vSeparator_1fy0l_144",x={"visualizations-tabs":"_visualizations-tabs_1fy0l_1",backdrop:P,"vtabs-content":"_vtabs-content_1fy0l_27","vtabs-tabs":"_vtabs-tabs_1fy0l_34","vtabs-actions":"_vtabs-actions_1fy0l_46","vtabs-eachfilter":"_vtabs-eachfilter_1fy0l_52",divisor:R,cleanfilters:B,"vtabs-datefilter":"_vtabs-datefilter_1fy0l_80","vtabs-datefilter-button":"_vtabs-datefilter-button_1fy0l_90",disabled:G,"vtabs-other":"_vtabs-other_1fy0l_111","vtabs-datefilter-popover":"_vtabs-datefilter-popover_1fy0l_123",vSeparator:J},K=T({components:{MuiAutocomplete:{styleOverrides:{listbox:{position:"absolute",backgroundColor:"#fff",boxShadow:"1px 0px 5px 0px rgba(0,0,0,0.20)",borderRadius:"4px"}}}}});function U({lae_id:i,onLaeChange:s,onFiltersChange:r}){const n=j(z),[a,t]=h.useState(null),[o,u]=h.useState({modalidades:null,regioes:null,ufs:null});h.useEffect(()=>{a&&r(a)},[a,r]);const c=(l,p)=>{let f,I={...o,[l]:p};const F=a||{};p?f={...F,[l]:p.map(M=>M.value).join(",")}:f={...F,[l]:null},l==="regioes"&&(I.ufs=null,f.ufs=null),u(I),t(f)},d=l=>{let p="";for(let f in l)l[f]&&(p=`${p}&f_${f}=${l[f]}`);return p};return e.jsx(D,{theme:K,children:!n&&e.jsxs("div",{className:x["visualizations-tabs"],children:[e.jsx("div",{className:x.backdrop}),e.jsx("div",{className:x["vtabs-content"],children:e.jsxs("div",{className:x["vtabs-actions"],children:[e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsx(L,{fullWidth:!0,children:e.jsx(w,{className:"input-select",value:i,onChange:l=>s(l.target.value),children:W.map(l=>e.jsxs(q,{value:l.id,children:[" ",l.title," "]},l.id))})})}),e.jsx("div",{className:x.vSeparator}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Modalidades"}),e.jsx(C,{label:"",url:"modality",onChange:l=>c("modalidades",l),value:o.modalidades,placeholder:"Todas"})]})}),e.jsx("div",{className:x.vSeparator}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Regiões"}),e.jsx(C,{label:"",url:"region",onChange:l=>c("regioes",l),value:o.regioes,placeholder:"Todas"})]})}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Estados"}),e.jsx(C,{label:"",url:"project/uf_list",query:`?none=1${d(a)}`,onChange:l=>c("ufs",l),value:o.ufs,placeholder:"Todas"})]})})]})})]})})}const X="_indic_ao0qk_1",Y="_visualizations_grid_ao0qk_6",Z="_base_ao0qk_12",ee="_question_ao0qk_16",te="_distributed_ao0qk_31",se="_bignumbers_ao0qk_35",ae="_bignumber_ao0qk_35",ie="_value_ao0qk_47",re="_label_ao0qk_54",ne="_prefix_ao0qk_57",le="_suffix_ao0qk_58",oe="_sep_ao0qk_61",de="_vr_spacer_ao0qk_64",ce="_last_ao0qk_69",ue="_selector_ao0qk_83",N={indic:X,visualizations_grid:Y,base:Z,question:ee,"general-view":"_general-view_ao0qk_25",distributed:te,bignumbers:se,bignumber:ae,value:ie,label:re,prefix:ne,suffix:le,sep:oe,vr_spacer:de,last:ce,selector:ue};function he({lae_id:i,indic_id:s,title:r,filters:n=""}){const a="Base",t=j($),[o,u]=h.useState(null),[c,d]=h.useState(!1),{data:l}=m(`adm/statistics/indic/base/${i}/${s}/?${n}`);return h.useEffect(()=>{l&&u(l.reduce((p,f)=>p+=f.total,0))},[l]),h.useEffect(()=>{setTimeout(()=>{d(!0)},100)},[]),e.jsxs(v,{middle:!0,title:r,children:[l&&e.jsxs("div",{className:`chart ${t&&"vertical"}`,id:a,children:[c&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...pe(l),type:"donut"})}),e.jsx(y,{data:l})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsxs("div",{children:[e.jsx("strong",{children:"Número de respostas: "}),!!o&&e.jsx(e.Fragment,{children:o})]})}),e.jsx(b,{chartData:l,chartWrapperId:a})]})}function pe(i){let s=[],r=[];for(let{name:n,total:a}of i)s.push(a),r.push(n);return{options:{...g().options,labels:r},series:s}}const xe=({value:i})=>e.jsx(Q,{displayType:"text",value:i,decimalSeparator:",",thousandSeparator:".",fixedDecimalScale:!0,decimalScale:2});function fe({lae_id:i,indic_id:s,question_id:r,title:n,filters:a="",totalAplica:t}){const o="Int",u=j($),{data:c}=m(`adm/statistics/indic/int2/${i}/${s}/${r}/?${a}`),{data:d}=m(`adm/statistics/indic/int1/${i}/${s}/${r}/?${a}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[c&&e.jsxs("div",{className:`chart ${u&&"vertical"}`,id:o,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...me(c),type:"donut"})}),e.jsx(y,{data:c})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{style:{fontSize:"0.85rem"},children:!!t&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:t})," que responderam SIM para pergunta base"]})}),e.jsxs("div",{children:[e.jsx("strong",{children:"Média das respostas: "}),!!d&&e.jsx(e.Fragment,{children:e.jsx(xe,{value:d})})]})]}),e.jsx(b,{chartData:c,chartWrapperId:o})]})}function me(i){let s=[],r=[];for(let{name:n,total:a}of i)s.push(a),r.push(n);return{options:{...g().options,labels:r},series:s}}function je({lae_id:i,indic_id:s,question_id:r,title:n,filters:a="",totalAplica:t}){const o="SN",u=j($),{data:c}=m(`adm/statistics/indic/sn/${i}/${s}/${r}/?${a}`),[d,l]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{l(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[c&&e.jsxs("div",{className:`chart ${u&&"vertical"}`,id:o,children:[d&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{..._e(c),type:"donut"})}),e.jsx(y,{data:c})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!t&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:t})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:c,chartWrapperId:o})]})}function _e(i){let s=[],r=[];for(let{name:n,total:a}of i)s.push(a),r.push(n);return{options:{...g().options,labels:r},series:s}}function be({lae_id:i,indic_id:s,question_id:r,title:n,options:a,filters:t="",totalAplica:o}){const u="SS",c=j($),{data:d}=m(`adm/statistics/indic/ss/${i}/${s}/${r}/?${t}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[d&&e.jsxs("div",{className:`chart ${c&&"vertical"}`,id:u,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...ve(d,a),type:"donut"})}),e.jsx(y,{data:d,options:a})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:u})]})}function ve(i,s){let r=[],n=[];for(let{name:a,total:t}of i)r.push(t),n.push(s[a]);return{options:{...g().options,labels:n},series:r}}function ye({lae_id:i,indic_id:s,question_id:r,title:n,options:a,filters:t="",totalAplica:o}){const u="SSO",c=j($),{data:d}=m(`adm/statistics/indic/sso/${i}/${s}/${r}/?${t}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[d&&e.jsxs("div",{className:`chart ${c&&"vertical"}`,id:u,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...$e(d,a),type:"donut"})}),e.jsx(y,{data:d,options:a})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:u})]})}function $e(i,s){let r=[],n=[];for(let{name:a,total:t}of i)r.push(t),n.push(s[a]);return{options:{...g().options,labels:n},series:r}}function ge({lae_id:i,indic_id:s,question_id:r,title:n,options:a,filters:t="",totalAplica:o}){const u=j(z),c="SM",{data:d}=m(`adm/statistics/indic/sm/${i}/${s}/${r}/?${t}`);return d?e.jsxs(v,{bottom:!0,id:c,sx:{button:{color:"inherit"}},title:`${n}*`,children:[e.jsx("div",{className:"vis-chart",id:c,children:d&&e.jsx(_,{...Se(d,a,u),type:"bar"})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:c})]}):null}function Se(i,s,r=!1){let n=[],a=[];for(let{name:o,total:u}of i)a.push(s[o]),n.push(u);const t=k({mobile:r,showLegend:!1});return{...t,series:[{name:"Quantidade",data:n}],options:{...t.options,xaxis:{...t.options.xaxis,categories:a}}}}function Ce({lae_id:i,indic_id:s,question_id:r,title:n,options:a,filters:t="",totalAplica:o}){const u=j(z),c="SMO",{data:d}=m(`adm/statistics/indic/smo/${i}/${s}/${r}/?${t}`);return d?e.jsxs(v,{bottom:!0,id:c,sx:{button:{color:"inherit"}},title:`${n}*`,children:[e.jsx("div",{className:"vis-chart",id:c,children:d&&e.jsx(_,{...Ne(d,a,u),type:"bar"})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:c})]}):null}function Ne(i,s,r=!1){let n=[],a=[];for(let{name:o,total:u}of i)a.push(s[o]),n.push(u);const t=k({mobile:r,showLegend:!1});return{...t,series:[{name:"Quantidade",data:n}],options:{...t.options,xaxis:{...t.options.xaxis,categories:a}}}}function ze({lae_id:i,indic:s,filters:r}){const{data:n}=m(`adm/statistics/indic/se_aplica/${i}/${s.id}/?${r}`),a=t=>{let o="";for(let u in t)t[u]&&(o=`${o}&f_${u}=${t[u]}`);return o};return e.jsxs(e.Fragment,{children:[e.jsx(H,{className:N.indic,label:s.name,variant:"outlined"}),e.jsxs("div",{className:`${N.visualizations_grid} ${N.question}`,children:[e.jsx(he,{lae_id:i,indic_id:s.id,title:s.base_question,filters:a(r)}),s.questions.map(t=>e.jsxs(h.Fragment,{children:[t.type===1&&e.jsx(fe,{lae_id:i,indic_id:s.id,question_id:t.id,title:t.title,filters:a(r),totalAplica:n}),t.type===10&&e.jsx(je,{lae_id:i,indic_id:s.id,question_id:t.id,title:t.title,filters:a(r),totalAplica:n}),t.type===5&&e.jsx(be,{lae_id:i,indic_id:s.id,question_id:t.id,options:S(t.options),title:t.title,filters:a(r),totalAplica:n}),t.type===7&&e.jsx(ye,{lae_id:i,indic_id:s.id,question_id:t.id,options:S(t.options),title:t.title,filters:a(r),totalAplica:n}),t.type===6&&e.jsx(ge,{lae_id:i,indic_id:s.id,question_id:t.id,options:S(t.options),title:t.title,filters:a(r),totalAplica:n}),t.type===8&&e.jsx(Ce,{lae_id:i,indic_id:s.id,question_id:t.id,options:S(t.options),title:t.title,filters:a(r),totalAplica:n})]},`${i}_${s.id}__${t.id}`))]})]})}function S(i){let s={};for(let r of i)s[r.value]=r.title;return s[100]="Outro",s}const Ve=()=>{const[i,s]=h.useState(1),[r,n]=h.useState([]);return e.jsxs("div",{className:"page",id:"adm-home",children:[e.jsx("div",{className:"page-header",children:e.jsx(V,{title:"Painel"})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-sidebar",children:e.jsx("div",{className:"sidebar-body",children:e.jsx(E,{submenu:!0,children:e.jsx(O,{analytics:!0})})})}),e.jsxs("div",{className:"page-body",children:[e.jsx(U,{lae_id:i,onLaeChange:s,onFiltersChange:n}),!!i&&e.jsx(e.Fragment,{children:A.filter(a=>a.lae_id===i).map(a=>e.jsx(h.Fragment,{children:e.jsx(ze,{lae_id:i,indic:a,filters:r})},`${i}_${a.id}`))})]})]})]})};export{Ve as default};
