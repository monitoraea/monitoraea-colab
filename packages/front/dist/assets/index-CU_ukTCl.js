import{u as w,r as a,e as M,n as $,x as c,j as e,D as z,k as T,l as F,m as I,B as k,b as u}from"./index-DLt25zcS.js";import{r as B}from"./robot-DMXJz1T6.js";import{B as r}from"./Box-BoG2D6P7.js";import{T as A,a as d}from"./Tabs-BURW5nwB.js";import{T as h,a as m}from"./TableRow-2NasLTb7.js";import"./KeyboardArrowRight-B-_qEmRL.js";const E="_mainDiv_16qmo_45",Q="_error_16qmo_50",H="_actions_16qmo_53",P="_community_16qmo_61",W="_maxh_16qmo_67",L="_indicator_16qmo_85",U="_divisor_16qmo_138",G="_cleanfilters_16qmo_144",i={mainDiv:E,error:Q,actions:H,community:P,maxh:W,"ptabs-content":"_ptabs-content_16qmo_72","ptabs-tabs":"_ptabs-tabs_16qmo_79",indicator:L,"fixed-size":"_fixed-size_16qmo_85","ptabs-actions":"_ptabs-actions_16qmo_111","ptabs-datefilter":"_ptabs-datefilter_16qmo_116","ptabs-datefilter-button":"_ptabs-datefilter-button_16qmo_126",divisor:U,cleanfilters:G};function ne({data:s}){const{server:n}=w(),[t,v]=a.useState(""),[N,g]=a.useState(""),[y,j]=a.useState(!1),[l,Y]=a.useState("projects"),[b,D]=a.useState(0),[p,C]=a.useState(0),[_,q]=a.useState(0),[f,R]=a.useState(0),{data:o}=M(["report_data",{reportId:s.content.reportId}],{queryFn:async()=>(await $.get(`${n}adm/report/${s.content.reportId}`)).data,enabled:!!s.content.reportId});return a.useEffect(()=>{s&&(v(c(s.createdAt).format("DD/MM/YYYY HH:mm")),g(c(s.createdAt).format("DD/MM/YYYY")))},[s]),a.useEffect(()=>{o&&(D(o.content.projects.length),C(o.content.published.length),q(o.content.indications.length),R(o.content.institutions.length))},[o]),e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{padding:"24px",marginTop:"48px",backgroundColor:"white",position:"relative",zIndex:"1",minHeight:"100px",width:"100%",boxShadow:"0px 0px 8px #0000001A",borderRadius:"8px"},children:[e.jsx(r,{sx:{display:"flex",justifyContent:"space-between"},children:e.jsxs(r,{sx:{display:"flex"},children:[e.jsx(r,{as:"img",src:B,alt:"salve",sx:{borderRadius:"50%",width:"48px",height:"48px"}}),e.jsxs(r,{sx:{marginLeft:"8px"},children:[e.jsx(r,{sx:{fontWeight:"bold",fontSize:"16px"},children:"Relatório Administrativo"}),e.jsx(r,{sx:{fontSize:"14px"},children:t})]})]})}),e.jsx(r,{sx:{marginTop:"8px"},children:e.jsxs("div",{className:i.mainDiv,children:[e.jsx("div",{children:e.jsxs("div",{children:[s&&s.content.result==="success"&&e.jsx(e.Fragment,{children:"Um novo relatório administrativo foi emitido"}),s&&s.content.result==="error"&&e.jsxs("div",{children:[e.jsx("div",{children:"Houve um problema na emissão do relatório administrativo:"}),e.jsx("div",{className:i.error,children:s.content.error})]})]})}),s&&s.content.result==="success"&&e.jsx("div",{className:i.actions,children:e.jsx("button",{className:"button-primary",size:"small",onClick:()=>j(!0),children:"Abrir"})})]})})]}),e.jsxs(z,{open:y,onClose:()=>j(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"md",children:[e.jsxs(T,{id:"alert-dialog-title",children:["Relatório de ",N]}),e.jsx(F,{id:"alert-dialog-description",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:o&&e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx("div",{className:i["ptabs-content"],children:e.jsxs(A,{className:i["ptabs-tabs"],value:l,onChange:S=>Y(S.target.id),"aria-label":"basic tabs example",children:[e.jsx(d,{disableRipple:!0,label:"Novas iniciativas",...x("projects",b),className:`${i.indicator} ${b<10&&i["fixed-size"]}`}),e.jsx(d,{disableRipple:!0,label:"Iniciativas publicadas",...x("published",p),className:`${i.indicator} ${p<10&&i["fixed-size"]}`}),e.jsx(d,{disableRipple:!0,label:"Iniciativas indicadas",...x("indications",_),className:`${i.indicator} ${_<10&&i["fixed-size"]}`}),e.jsx(d,{disableRipple:!0,label:"Novas instituições",...x("institutions",f),className:`${i.indicator} ${f<10&&i["fixed-size"]}`})]})})}),l==="projects"&&e.jsx(J,{elements:o.content.projects}),l==="published"&&e.jsx(K,{elements:o.content.published}),l==="indications"&&e.jsx(O,{elements:o.content.indications}),l==="institutions"&&e.jsx(V,{elements:o.content.institutions})]})})})}),e.jsx(I,{children:e.jsx(k,{onClick:()=>j(!1),autoFocus:!0,children:"Cancelar"})})]})]})}function J({elements:s}){const{changeRoute:n}=u();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"tablebox",children:e.jsx("div",{className:"tbox-body",children:e.jsxs("table",{className:"tbox-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Quando"}),e.jsx("th",{children:"Nome"})]})}),e.jsx(h,{children:s.map(t=>e.jsxs(m,{children:[e.jsx("td",{children:c(t.when).format("DD/MM/YYYY")}),e.jsx("td",{children:e.jsx("span",{className:i.community,onClick:()=>n({community:t.community_id}),children:t.nome})})]},t.id))})]})})})})}function K({elements:s}){const{changeRoute:n}=u();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"tablebox",children:e.jsx("div",{className:"tbox-body",children:e.jsxs("table",{className:"tbox-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Quando"}),e.jsx("th",{children:"Nome"})]})}),e.jsx(h,{children:s.map(t=>e.jsxs(m,{children:[e.jsx("td",{children:c(t.when).format("DD/MM/YYYY")}),e.jsx("td",{children:e.jsx("span",{className:i.community,onClick:()=>n({community:t.community_id}),children:t.nome})})]},t.id))})]})})})})}function O({elements:s}){const{changeRoute:n}=u();return e.jsx(e.Fragment,{children:e.jsx("div",{className:`tablebox ${i.maxh}`,children:e.jsx("div",{className:"tbox-body",children:e.jsxs("table",{className:"tbox-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Quando"}),e.jsx("th",{children:"Nome"}),e.jsx("th",{children:"Nome do contato"}),e.jsx("th",{children:"E-mail do contato"}),e.jsx("th",{children:"Telefone do contato"}),e.jsx("th",{children:"Site"})]})}),e.jsx(h,{children:s.map(t=>e.jsxs(m,{children:[e.jsx("td",{children:c(t.when).format("DD/MM/YYYY")}),!t.community_id&&e.jsx("td",{children:t.name}),!!t.community_id&&e.jsx("td",{children:e.jsx("span",{className:i.community,onClick:()=>n({community:t.community_id}),children:t.name})}),e.jsx("td",{children:t.contact_name}),e.jsx("td",{children:t.contact_email}),e.jsx("td",{children:t.contact_phone}),e.jsx("td",{children:t.website})]},t.id))})]})})})})}function V({elements:s}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"tablebox",children:e.jsx("div",{className:"tbox-body",children:e.jsxs("table",{className:"tbox-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Quando"}),e.jsx("th",{children:"Nome"})]})}),e.jsx(h,{children:s.map(n=>e.jsxs(m,{children:[e.jsx("td",{children:c(n.when).format("DD/MM/YYYY")}),e.jsx("td",{children:n.nome})]},n.id))})]})})})})}function x(s,n=""){return{id:s,"aria-controls":`simple-tabpanel-${s}`,value:s,"data-problems":n}}export{ne as default};
