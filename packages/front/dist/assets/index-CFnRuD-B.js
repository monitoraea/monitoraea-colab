import{aM as k,r as h,j as e,aN as T,i as D,S as w,ai as L,M as E,aO as z,e as f,aP as $,Z as V,P as W,ao as A,aj as O}from"./index-DLt25zcS.js";import{A as C}from"./index-hVwkNHIF.js";import{u as j,_,T as g,H as b,p as y,h as F}from"./index-trjtrqOO.js";import{S as P}from"./index-B7vdWLm9.js";import{C as v}from"./index-CaP4qi4o.js";import{N as Q}from"./react-number-format.es-A55xSCv9.js";const R="_backdrop_lqpl0_8",H="_divisor_lqpl0_56",B="_cleanfilters_lqpl0_62",Z="_disabled_lqpl0_103",G="_vSeparator_lqpl0_144",x={"visualizations-tabs":"_visualizations-tabs_lqpl0_1",backdrop:R,"vtabs-content":"_vtabs-content_lqpl0_27","vtabs-tabs":"_vtabs-tabs_lqpl0_34","vtabs-actions":"_vtabs-actions_lqpl0_46","vtabs-eachfilter":"_vtabs-eachfilter_lqpl0_52",divisor:H,cleanfilters:B,"vtabs-datefilter":"_vtabs-datefilter_lqpl0_80","vtabs-datefilter-button":"_vtabs-datefilter-button_lqpl0_90",disabled:Z,"vtabs-other":"_vtabs-other_lqpl0_111","vtabs-datefilter-popover":"_vtabs-datefilter-popover_lqpl0_123",vSeparator:G},J=k({components:{MuiAutocomplete:{styleOverrides:{listbox:{position:"absolute",backgroundColor:"#fff",boxShadow:"1px 0px 5px 0px rgba(0,0,0,0.20)",borderRadius:"4px"}}}}});function K({lae_id:i,onLaeChange:t,onFiltersChange:r}){const n=j(z),[a,s]=h.useState(null),[o,u]=h.useState({modalidades:null,regioes:null,ufs:null});h.useEffect(()=>{a&&r(a)},[a,r]);const c=(l,p)=>{let m,q={...o,[l]:p};const I=a||{};p?m={...I,[l]:p.map(M=>M.value).join(",")}:m={...I,[l]:null},l==="regioes"&&(q.ufs=null,m.ufs=null),u(q),s(m)},d=l=>{let p="";for(let m in l)l[m]&&(p=`${p}&f_${m}=${l[m]}`);return p};return e.jsx(T,{theme:J,children:!n&&e.jsxs("div",{className:x["visualizations-tabs"],children:[e.jsx("div",{className:x.backdrop}),e.jsx("div",{className:x["vtabs-content"],children:e.jsxs("div",{className:x["vtabs-actions"],children:[e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsx(D,{fullWidth:!0,children:e.jsx(w,{className:"input-select",value:i,onChange:l=>t(l.target.value),children:L.map(l=>e.jsxs(E,{value:l.id,children:[" ",l.title," "]},l.id))})})}),e.jsx("div",{className:x.vSeparator}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Modalidades"}),e.jsx(C,{label:"",url:"modality",onChange:l=>c("modalidades",l),value:o.modalidades,placeholder:"Todas"})]})}),e.jsx("div",{className:x.vSeparator}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Regiões"}),e.jsx(C,{label:"",url:"region",onChange:l=>c("regioes",l),value:o.regioes,placeholder:"Todas"})]})}),e.jsx("div",{className:x["vtabs-eachfilter"],children:e.jsxs("div",{className:x["vtabs-other"],children:[e.jsx("label",{children:"Estados"}),e.jsx(C,{label:"",url:"project/uf_list",query:`?none=1${d(a)}`,onChange:l=>c("ufs",l),value:o.ufs,placeholder:"Todas"})]})})]})})]})})}const U="_indic_ao0qk_1",X="_visualizations_grid_ao0qk_6",Y="_base_ao0qk_12",ee="_question_ao0qk_16",se="_distributed_ao0qk_31",te="_bignumbers_ao0qk_35",ae="_bignumber_ao0qk_35",ie="_value_ao0qk_47",re="_label_ao0qk_54",ne="_prefix_ao0qk_57",le="_suffix_ao0qk_58",oe="_sep_ao0qk_61",de="_vr_spacer_ao0qk_64",ce="_last_ao0qk_69",ue="_selector_ao0qk_83",N={indic:U,visualizations_grid:X,base:Y,question:ee,"general-view":"_general-view_ao0qk_25",distributed:se,bignumbers:te,bignumber:ae,value:ie,label:re,prefix:ne,suffix:le,sep:oe,vr_spacer:de,last:ce,selector:ue};function he({lae_id:i,indic_id:t,title:r,filters:n=""}){const a="Base",s=j($),[o,u]=h.useState(null),[c,d]=h.useState(!1),{data:l}=f(`adm/statistics/indic/base/${i}/${t}/?${n}`);return h.useEffect(()=>{l&&u(l.reduce((p,m)=>p+=m.total,0))},[l]),h.useEffect(()=>{setTimeout(()=>{d(!0)},100)},[]),e.jsxs(v,{middle:!0,title:r,children:[l&&e.jsxs("div",{className:`chart ${s&&"vertical"}`,id:a,children:[c&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...pe(l),type:"donut"})}),e.jsx(g,{data:l})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsxs("div",{children:[e.jsx("strong",{children:"Número de respostas: "}),!!o&&e.jsx(e.Fragment,{children:o})]})}),e.jsx(b,{chartData:l,chartWrapperId:a})]})}function pe(i){let t=[],r=[];for(let{name:n,total:a}of i)t.push(a),r.push(n);return{options:{...y().options,labels:r},series:t}}const xe=({value:i})=>e.jsx(Q,{displayType:"text",value:i,decimalSeparator:",",thousandSeparator:".",fixedDecimalScale:!0,decimalScale:2});function me({lae_id:i,indic_id:t,question_id:r,title:n,filters:a="",totalAplica:s}){const o="Int",u=j($),{data:c}=f(`adm/statistics/indic/int2/${i}/${t}/${r}/?${a}`),{data:d}=f(`adm/statistics/indic/int1/${i}/${t}/${r}/?${a}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[c&&e.jsxs("div",{className:`chart ${u&&"vertical"}`,id:o,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...fe(c),type:"donut"})}),e.jsx(g,{data:c})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{style:{fontSize:"0.85rem"},children:!!s&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:s})," que responderam SIM para pergunta base"]})}),e.jsxs("div",{children:[e.jsx("strong",{children:"Média das respostas: "}),!!d&&e.jsx(e.Fragment,{children:e.jsx(xe,{value:d})})]})]}),e.jsx(b,{chartData:c,chartWrapperId:o})]})}function fe(i){let t=[],r=[];for(let{name:n,total:a}of i)t.push(a),r.push(n);return{options:{...y().options,labels:r},series:t}}function je({lae_id:i,indic_id:t,question_id:r,title:n,filters:a="",totalAplica:s}){const o="SN",u=j($),{data:c}=f(`adm/statistics/indic/sn/${i}/${t}/${r}/?${a}`),[d,l]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{l(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[c&&e.jsxs("div",{className:`chart ${u&&"vertical"}`,id:o,children:[d&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{..._e(c),type:"donut"})}),e.jsx(g,{data:c})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!s&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:s})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:c,chartWrapperId:o})]})}function _e(i){let t=[],r=[];for(let{name:n,total:a}of i)t.push(a),r.push(n);return{options:{...y().options,labels:r},series:t}}function be({lae_id:i,indic_id:t,question_id:r,title:n,options:a,filters:s="",totalAplica:o}){const u="SS",c=j($),{data:d}=f(`adm/statistics/indic/ss/${i}/${t}/${r}/?${s}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[d&&e.jsxs("div",{className:`chart ${c&&"vertical"}`,id:u,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...ve(d,a),type:"donut"})}),e.jsx(g,{data:d,options:a})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:u})]})}function ve(i,t){let r=[],n=[];for(let{name:a,total:s}of i)r.push(s),n.push(t[a]);return{options:{...y().options,labels:n},series:r}}function $e({lae_id:i,indic_id:t,question_id:r,title:n,options:a,filters:s="",totalAplica:o}){const u="SSO",c=j($),{data:d}=f(`adm/statistics/indic/sso/${i}/${t}/${r}/?${s}`),[l,p]=h.useState(!1);return h.useEffect(()=>{setTimeout(()=>{p(!0)},100)},[]),e.jsxs(v,{middle:!0,title:`${n}*`,children:[d&&e.jsxs("div",{className:`chart ${c&&"vertical"}`,id:u,children:[l&&e.jsx("div",{className:"chart-render",children:e.jsx(_,{...ge(d,a),type:"donut"})}),e.jsx(g,{data:d,options:a})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:u})]})}function ge(i,t){let r=[],n=[];for(let{name:a,total:s}of i)r.push(s),n.push(t[a]);return{options:{...y().options,labels:n},series:r}}function ye({lae_id:i,indic_id:t,question_id:r,title:n,options:a,filters:s="",totalAplica:o}){const u=j(z),c="SM",{data:d}=f(`adm/statistics/indic/sm/${i}/${t}/${r}/?${s}`);return d?e.jsxs(v,{bottom:!0,id:c,sx:{button:{color:"inherit"}},title:`${n}*`,children:[e.jsx("div",{className:"vis-chart",id:c,children:d&&e.jsx(_,{...Se(d,a,u),type:"bar"})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:c})]}):null}function Se(i,t,r=!1){let n=[],a=[];for(let{name:o,total:u}of i)a.push(t[o]),n.push(u);const s=F({mobile:r,showLegend:!1});return{...s,series:[{name:"Quantidade",data:n}],options:{...s.options,xaxis:{...s.options.xaxis,categories:a}}}}function Ce({lae_id:i,indic_id:t,question_id:r,title:n,options:a,filters:s="",totalAplica:o}){const u=j(z),c="SMO",{data:d}=f(`adm/statistics/indic/smo/${i}/${t}/${r}/?${s}`);return d?e.jsxs(v,{bottom:!0,id:c,sx:{button:{color:"inherit"}},title:`${n}*`,children:[e.jsx("div",{className:"vis-chart",id:c,children:d&&e.jsx(_,{...Ne(d,a,u),type:"bar"})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{style:{fontSize:"0.85rem"},children:!!o&&e.jsxs(e.Fragment,{children:["* dos ",e.jsx("strong",{children:o})," que responderam SIM para pergunta base"]})})}),e.jsx(b,{chartData:d,chartWrapperId:c})]}):null}function Ne(i,t,r=!1){let n=[],a=[];for(let{name:o,total:u}of i)a.push(t[o]),n.push(u);const s=F({mobile:r,showLegend:!1});return{...s,series:[{name:"Quantidade",data:n}],options:{...s.options,xaxis:{...s.options.xaxis,categories:a}}}}function ze({lae_id:i,indic:t,filters:r}){const{data:n}=f(`adm/statistics/indic/se_aplica/${i}/${t.id}/?${r}`),a=s=>{let o="";for(let u in s)s[u]&&(o=`${o}&f_${u}=${s[u]}`);return o};return e.jsxs(e.Fragment,{children:[e.jsx(V,{className:N.indic,label:t.name,variant:"outlined"}),e.jsxs("div",{className:`${N.visualizations_grid} ${N.question}`,children:[e.jsx(he,{lae_id:i,indic_id:t.id,title:t.base_question,filters:a(r)}),t.questions.map(s=>e.jsxs(h.Fragment,{children:[s.type===1&&e.jsx(me,{lae_id:i,indic_id:t.id,question_id:s.id,title:s.title,filters:a(r),totalAplica:n}),s.type===10&&e.jsx(je,{lae_id:i,indic_id:t.id,question_id:s.id,title:s.title,filters:a(r),totalAplica:n}),s.type===5&&e.jsx(be,{lae_id:i,indic_id:t.id,question_id:s.id,options:S(s.options),title:s.title,filters:a(r),totalAplica:n}),s.type===7&&e.jsx($e,{lae_id:i,indic_id:t.id,question_id:s.id,options:S(s.options),title:s.title,filters:a(r),totalAplica:n}),s.type===6&&e.jsx(ye,{lae_id:i,indic_id:t.id,question_id:s.id,options:S(s.options),title:s.title,filters:a(r),totalAplica:n}),s.type===8&&e.jsx(Ce,{lae_id:i,indic_id:t.id,question_id:s.id,options:S(s.options),title:s.title,filters:a(r),totalAplica:n})]},`${i}_${t.id}__${s.id}`))]})]})}function S(i){let t={};for(let r of i)t[r.value]=r.title;return t[100]="Outro",t}const De=()=>{const[i,t]=h.useState(1),[r,n]=h.useState([]);return e.jsxs("div",{className:"page",id:"adm-home",children:[e.jsx("div",{className:"page-header",children:e.jsx(W,{title:"Painel"})}),e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-sidebar",children:e.jsx("div",{className:"sidebar-body",children:e.jsx(A,{submenu:!0,children:e.jsx(P,{analytics:!0})})})}),e.jsxs("div",{className:"page-body",children:[e.jsx(K,{lae_id:i,onLaeChange:t,onFiltersChange:n}),!!i&&e.jsx(e.Fragment,{children:O.filter(a=>a.lae_id===i).map(a=>e.jsx(h.Fragment,{children:e.jsx(ze,{lae_id:i,indic:a,filters:r})},`${i}_${a.id}`))})]})]})]})};export{De as default};
