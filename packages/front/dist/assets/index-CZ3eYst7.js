import{r as n,e as g,j as o,T as O}from"./index-7W1X0-fp.js";import{A as P}from"./Autocomplete-rJEHThK9.js";import{C as T}from"./CircularProgress-DJ5hvbqu.js";function S({label:h="Label",url:l,urlSingle:u,query:j="",value:s,titleField:c,onChange:A,disabled:L,error:E}){const[d,p]=n.useState(!1),[C,m]=n.useState([]),[b,a]=n.useState(null),{data:i,isLoading:f}=g(`${u||l}/${s}`,{enabled:!!s}),{data:r,isLoading:x}=g(`${l}/${j}`,{enabled:d});n.useEffect(()=>{m(r?r.list:[])},[r]),n.useEffect(()=>{s||a(null)},[s]),n.useEffect(()=>{i&&a(i)},[i]);const I=(e,t)=>{a(t),A(t?t.id:null)};return o.jsx(o.Fragment,{children:o.jsx(P,{className:"input-autocomplete",id:"asynchronous-demo",disabled:L,open:d,onOpen:()=>{p(!0)},onClose:()=>{p(!1)},onChange:I,value:b,isOptionEqualToValue:(e,t)=>e.id===t.id,getOptionLabel:e=>c?e[c]:e.name,options:C,noOptionsText:"Nenhuma opção",loading:f||x,renderInput:e=>o.jsx(O,{...e,label:h,error:E,InputProps:{...e.InputProps,endAdornment:o.jsxs(n.Fragment,{children:[f||x?o.jsx(T,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}})})})}export{S as A};
