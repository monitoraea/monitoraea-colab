import{r as n,j as e,t as ce,T as z,o as Ne,p as Ce,A as he,u as X,d as te,c as ie,e as Z,f as U,C as se,v as de,M as T,w as ue,H as Se,_ as qe,n as F,x as De,U as Ie,R as le,b as xe,i as Q,y as V,S as ae,g as ze,h as Be,z as Ge,a as He,P as Le,D as $e,k as we,l as ne,m as ke,B as Qe}from"./index-DLt25zcS.js";import{C as je}from"./index-Bha5MrYE.js";import{T as We,a as Y}from"./Tabs-BURW5nwB.js";import{A as Ve}from"./index-DXLqgsyN.js";import{A as pe,M as Ke}from"./index-DFUGF19k.js";import{A as K}from"./index-hVwkNHIF.js";import{E as L,i as Ze}from"./indicsTree-CbQzdjjY.js";import{s as ee}from"./FreeMultiple.module-Bw9cwhhu.js";import{G as ve,H as A,s as j,C as Ue}from"./ConectionsTab-DZo3PbTH.js";import{n as Xe,S as Ye,a as Je,b as es,c as ss}from"./no_thumb-BtmO3-w3.js";import{P as as}from"./plus-B_5SJsXG.js";import{C as ts}from"./index-CaP4qi4o.js";import{N as oe}from"./react-number-format.es-A55xSCv9.js";import{E as Ee}from"./CheckCircle-DswnPI8a.js";import{q as is}from"./styled-components.browser.esm-BtHF474-.js";import{D as fe}from"./Download-Cw4RWD-J.js";import{B as ns}from"./Box-BoG2D6P7.js";import"./KeyboardArrowRight-B-_qEmRL.js";import"./_baseIteratee-BNFwsDK1.js";const ls="_backdrop_1cgck_52",os="_indicator_1cgck_85",rs="_warning_1cgck_106",cs="_ready_1cgck_109",ds="_divisor_1cgck_146",us="_cleanfilters_1cgck_152",M={"projects-tabs":"_projects-tabs_1cgck_45",backdrop:ls,"ptabs-content":"_ptabs-content_1cgck_72","ptabs-tabs":"_ptabs-tabs_1cgck_79",indicator:os,"fixed-size":"_fixed-size_1cgck_85","not-ready":"_not-ready_1cgck_103",warning:rs,ready:cs,"ptabs-actions":"_ptabs-actions_1cgck_119","ptabs-datefilter":"_ptabs-datefilter_1cgck_124","ptabs-datefilter-button":"_ptabs-datefilter-button_1cgck_134",divisor:ds,cleanfilters:us};function ms({defaultTab:t,onTabChange:s,analysis:i}){const[l,c]=n.useState(!1),[d,a]=n.useState(!1),[u,r]=n.useState(!1),[y,v]=n.useState(!1),[m,h]=n.useState(0),[w,k]=n.useState(0),C=$=>{s($.target.id)};return n.useEffect(()=>{if(!i)return;let $=0;const g=Object.filter=(o,O)=>Object.keys(o).filter(b=>(O(o[b])&&$++,O(o[b]))).reduce((b,R)=>(b[R]=o[R],b),{});g(i.analysis.indics,o=>o.ready===!1),h($),$=0;const I=g(i.analysis.information,o=>o===!1);k($),c((o=>Object.keys(o).length===0)(I)),r(Object.values(i.analysis.indics).reduce((o,O)=>O.ready?o:!1,!0)),v(i.analysis.geo),a(i.analysis.connections)},[i]),e.jsxs("div",{className:M["projects-tabs"],children:[e.jsx("div",{className:M.backdrop}),e.jsx("div",{className:M["ptabs-content"],children:e.jsxs(We,{className:M["ptabs-tabs"],onChange:C,value:t,children:[e.jsx(Y,{disableRipple:!0,label:"Informações",...J("informacao",w>0?w:""),className:`${M.indicator} ${l?M.ready:M["not-ready"]} ${w<10&&M["fixed-size"]}`}),e.jsx(Y,{disableRipple:!0,label:"Conexões",...J("conexoes"),className:`${M.indicator} ${d?M.ready:M["not-ready"]}`}),e.jsx(Y,{disableRipple:!0,label:"Indicadores",className:`${M.indicator} ${u?M.ready:M["not-ready"]} ${m<10&&M["fixed-size"]}`,...J("indicadores",m>0?m:"")}),e.jsx(Y,{disableRipple:!0,label:"Abrangência",className:`${M.indicator} ${y?M.ready:M["not-ready"]} ${M["fixed-size"]}`,...J("abrangencia",y?"":"1")}),e.jsx(Y,{disableRipple:!0,label:"Linha do tempo",...J("timeline")})]})})]})}function J(t,s=""){return{id:t,"aria-controls":`simple-tabpanel-${t}`,value:t,"data-problems":s}}const me=({onChange:t,data:s,sectionTitle:i,hasError:l,error:c})=>{const[d,a]=n.useState([]);n.useEffect(()=>{a(s?s.split(`
`):[])},[s]);const u=()=>{a([...d,""])},r=v=>{d.splice(v,1),a([...d]),t([...d].join(`
`))},y=(v,m)=>{let h=[...d];h[v]=m,a(h),t(h.join(`
`))};return e.jsxs(e.Fragment,{children:[i&&e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-title",children:e.jsxs("div",{className:ee.title,children:[l&&e.jsx("div",{className:`mr-2 ${ee.error}`,children:e.jsx(L,{})}),e.jsx("span",{style:{color:c?"red":"unset"},children:i})]})}),e.jsx("div",{className:"section-actions",children:e.jsxs("button",{className:"button-outline",onClick:()=>u(),children:[e.jsx(ce,{}),"Adicionar"]})})]}),!i&&e.jsx("div",{className:ee.new_line,children:e.jsxs("button",{className:"button-outline",onClick:()=>u(),children:[e.jsx(ce,{}),"Adicionar"]})}),d&&d.map((v,m)=>e.jsx("div",{children:e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-xs-11",children:e.jsx(z,{className:"input-text",value:v,onChange:h=>y(m,h.target.value),multiline:!0,minRows:1,maxRows:5})}),e.jsx("div",{className:"col-xs-1",children:e.jsx("div",{className:ee["svg-icon-box"],children:e.jsx("div",{children:e.jsx(Ne,{title:"Remover",children:e.jsx(Ce,{onClick:()=>r(m),children:e.jsx(he,{})})})})})})]},m)},m))]})},hs=({onChange:t,data:s,sectionTitle:i,error:l})=>{const[c,d]=n.useState([]);n.useEffect(()=>{d(s||[])},[s]);const a=()=>{d([...c,{tel:"",nome:"",email:""}])},u=v=>{c.splice(v,1),d([...c]),y()},r=(v,m)=>h=>{let w=[...c];w[m][v]=h,d(w)},y=()=>{t(c)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-title",style:{color:l?"red":"unset"},children:i}),e.jsx("div",{className:"section-actions",children:e.jsxs("button",{className:"button-outline",onClick:()=>a(),children:[e.jsx(ce,{}),"Adicionar"]})})]}),c&&c.map((v,m)=>e.jsx("div",{children:e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-xs-4",children:e.jsx(z,{className:"input-text",label:"Nome",value:v.nome||"",onChange:h=>r("nome",m)(h.target.value),onBlur:y})}),e.jsx("div",{className:"col-xs-4",children:e.jsx(z,{className:"input-text",label:"E-mail",value:v.email||"",onChange:h=>r("email",m)(h.target.value),onBlur:y})}),e.jsx("div",{className:"col-xs-3",children:e.jsx(z,{className:"input-text",label:"Telefone",value:v.tel||"",onChange:h=>r("tel",m)(h.target.value),onBlur:y})}),e.jsx("div",{className:"col-xs-1",children:e.jsx("div",{className:ee["svg-icon-box"],children:e.jsx("div",{children:e.jsx(Ne,{title:"Remover",children:e.jsx(Ce,{onClick:()=>u(m),children:e.jsx(he,{})})})})})})]},m)},m))]})};function xs({projectId:t,problems:s}){var b,R,G;const{server:i}=X(),l=te(),{enqueueSnackbar:c,closeSnackbar:d}=ie(),[a,u]=n.useState([]),[r,y]=n.useState(!1),[v,m]=n.useState({}),[h,w]=n.useState([]),[k,C]=n.useState(null),{data:$}=Z(["project_info",{projectId:t}],{queryFn:async()=>(await F.get(`${i}project/${t}/draft/info`)).data});n.useEffect(()=>{$&&u($.project)},[$]),n.useEffect(()=>{if(a){if(!a.atuacao)return w([]);w(a.atuacao.map((p,N)=>({id:N,label:p,value:p})))}},[a]);const g=p=>N=>{y(!0);let x={};if(p==="nome"){const{value:_,reason:S}=N;if(S==="clear")x={...a,nome:"",indicado:null};else if(["input","reset"].includes(S))x={...a,nome:_};else return}else{if(p==="indicado"&&!N)return;if(p==="atuacao"){const _=N.map(B=>B.value);x={...a,atuacao:_};const S=qe.difference(a.atuacao,_);if(S.length){let B=a.ufs.filter(E=>E.region!==S[0]);x.ufs=B}}else x={...a,[p]:N}}console.log(`changing ${p}:`,N,x),u(x)},I=(p,N)=>async x=>{console.log(`creating ${p}: ${x}`);let _={entity:p,data:{name:x}};if(N&&N.length)for(let B of N)_.data[B]=a[B];const{data:S}=await D.mutateAsync(_);return S},D=U(({entity:p,data:N})=>F.post(`${i}${p}/`,N),{onSuccess:()=>l.invalidateQueries(`project/${t}/draft/info`)}),o=U(p=>{if(p)return F.put(`${i}project/${t}/draft/info`,p)},{onSuccess:()=>l.invalidateQueries(`project/${t}/draft/info`)}),O=async()=>{if(y(!1),a.nome.trim().length===0){m({...v,nome:!0});return}m([]);const p=c("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});try{await o.mutateAsync(a),l.invalidateQueries("project_indics"),d(p),c("Registro gravado com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})}catch(N){d(p),console.error(N),c("Erro ao gravar o registro!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})}};return e.jsx(e.Fragment,{children:a&&e.jsx("div",{className:"page-content",children:e.jsxs("div",{className:"page-body",children:[e.jsx(se,{middle:!0,headerless:!0,children:e.jsxs("div",{className:"p-3",children:[e.jsxs("section",{id:"details",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-title",children:"Detalhes da instituição"}),e.jsxs("div",{className:"section-actions",children:[e.jsx(ve,{tab:"informacao"}),e.jsxs("button",{className:"button-primary",onClick:()=>O(),children:[e.jsx(de,{}),"Gravar"]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-xs-6",style:{display:"flex"},children:[e.jsx(pe,{label:"Nome da instituição",url:"institution",onChange:g("instituicao_id"),creatable:!0,onCreate:I("institution",["instituicao_id"]),value:a.instituicao_id,error:s.includes("instituicao_id")}),e.jsx(A,{type:"info",keyRef:["instituicao_id"],openHelpbox:C})]}),e.jsxs("div",{className:"col-xs-4",style:{display:"flex"},children:[e.jsx(K,{label:"Segmento da instituição",url:"segmento/related",urlSingle:"segmento",onChange:g("instituicao_segmentos"),value:a.instituicao_segmentos,multiple:!0,error:s.includes("instituicao_segmentos")}),e.jsx(A,{type:"info",keyRef:["segmento"],openHelpbox:C})]}),e.jsxs("div",{className:"col-xs-2",style:{display:"flex"},children:[e.jsxs(z,{select:!0,id:"money-select",label:"Porte da instituição",className:"input-select",value:a.instituicao_porte||"none",onChange:p=>g("instituicao_porte")(p.target.value),error:s.includes("instituicao_porte"),children:[e.jsx(T,{value:"none",children:"Não respondido"}),e.jsx(T,{value:"pequeno",children:"Pequeno - até 10 colaboradores"}),e.jsx(T,{value:"medio",children:"Médio - até 50 colaboradores"}),e.jsx(T,{value:"grande",children:"Grande - mais de 50 colaboradores"})]}),e.jsx(A,{type:"info",keyRef:["porte"],openHelpbox:C})]})]})]}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsxs("section",{id:"details",children:[e.jsx("div",{className:"section-header",children:e.jsx("div",{className:"section-title",children:"Detalhes da iniciativa"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-xs-12",style:{display:"flex"},children:[e.jsx(pe,{label:"Nome da iniciativa",url:"project/list_all_indic",urlSingle:"project/draft/name",query:`?me=${t}`,invalidText:a.nome,value:a.indicado,onChange:g("indicado"),inputValue:a.nome||"",onInputChange:(p,N,x)=>g("nome")({value:N,reason:x}),freeSolo:!0,error:s.includes("nome")}),e.jsx(A,{type:"info",keyRef:["nome"],openHelpbox:C})]})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-xs-4",style:{display:"flex"},children:[e.jsx(Ve,{label:"Modalidade",url:"modality",onChange:g("modalidade_id"),value:a.modalidade_id,error:s.includes("modalidade_id")}),e.jsx(A,{type:"info",keyRef:["modalidade_id"],openHelpbox:C})]}),e.jsxs("div",{className:"col-xs-4",style:{display:"flex"},children:[e.jsx(K,{label:"Regiões",url:"project/regions",titleField:"value",onChange:g("atuacao"),value:h,multiple:!0,error:s.includes("atuacao")}),e.jsx(A,{type:"info",keyRef:["atuacao"],openHelpbox:C})]}),e.jsxs("div",{className:"col-xs-4",style:{display:"flex"},children:[e.jsx(K,{label:"Estados",url:"uf/related",urlSingle:"uf",query:`?f_regioes=${(b=a.atuacao)!=null&&b.length?a.atuacao.join(","):""}`,titleField:"value",onChange:g("ufs"),value:a.ufs,multiple:!0,error:s.includes("ufs")}),e.jsx(A,{type:"info",keyRef:["ufs"],openHelpbox:C})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-xs-6",style:{display:"flex"},children:[e.jsxs(z,{select:!0,id:"money-select",label:"Situação do desenvolvimento",className:"input-select",value:a.status_desenvolvimento||"none",onChange:p=>g("status_desenvolvimento")(p.target.value),error:s.includes("status_desenvolvimento"),children:[e.jsx(T,{value:"none",children:"Não respondido"}),e.jsx(T,{value:"nao_iniciada",children:"Não iniciada"}),e.jsx(T,{value:"em_desenvolvimento",children:"Em desenvolvimento"}),e.jsx(T,{value:"finalizada",children:"Finalizada"}),e.jsx(T,{value:"interrompida",children:"Interrompida"})]}),e.jsx(A,{type:"info",keyRef:["status_desenvolvimento"],openHelpbox:C})]}),e.jsx("div",{className:"col-xs-3",style:{display:"flex"},children:["nao_iniciada","em_desenvolvimento","finalizada","interrompida"].includes(a.status_desenvolvimento)&&e.jsx(ue,{className:"input-datepicker",label:a.status_desenvolvimento==="nao_iniciada"?"Previsão de inicio":"Inicio do desenvolvimento",value:a.mes_inicio,onChange:g("mes_inicio"),views:["month","year"],inputFormat:"MM/yyyy",maxDate:a.mes_fim,error:s.includes("mes_inicio")})}),e.jsx("div",{className:"col-xs-3",style:{display:"flex"},children:["nao_iniciada","finalizada","interrompida","em_desenvolvimento"].includes(a.status_desenvolvimento)&&e.jsx(ue,{className:"input-datepicker",label:["em_desenvolvimento","nao_iniciada"].includes(a.status_desenvolvimento)?"Previsão de conclusão":"Término do desenvolvimento",value:a.mes_fim,onChange:g("mes_fim"),views:["month","year"],inputFormat:"MM/yyyy",minDate:a.mes_inicio,error:s.includes("mes_fim")})})]})]}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsx("section",{id:"contacts",children:e.jsx(hs,{data:a.contatos,onChange:g("contatos"),sectionTitle:e.jsx(re,{title:"Contatos",keyRef:["contatos"],openHelpbox:C}),error:s.includes("contatos")})}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsx("section",{id:"objectives",children:e.jsx(me,{data:a.objetivos_txt,onChange:g("objetivos_txt"),sectionTitle:e.jsx(re,{title:"Objetivos",keyRef:["objetivos_txt"],openHelpbox:C}),error:s.includes("objetivos_txt")})}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsx("section",{id:"general-aspects",children:e.jsx(me,{data:a.aspectos_gerais_txt,onChange:g("aspectos_gerais_txt"),sectionTitle:e.jsx(re,{title:"Aspectos gerais",keyRef:["aspectos_gerais_txt"],openHelpbox:C}),error:s.includes("aspectos_gerais_txt")})}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsx("section",{id:"public",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-xs-6",children:[e.jsx(K,{label:"Públicos",url:"publico",query:"?others=-1",titleField:"label",onChange:g("publicos"),value:a.publicos,multiple:!0,error:s.includes("publicos")}),e.jsx(A,{type:"info",keyRef:["publicos"],openHelpbox:C})]}),((R=a.publicos)==null?void 0:R.find(p=>String(p.id)==="-1"))&&e.jsx("div",{className:"col-xs-6",children:e.jsx(z,{className:"input-text",label:"Especifique",value:a.publicos_especificar||"",onChange:p=>g("publicos_especificar")(p.target.value)})})]})}),e.jsx("hr",{className:"hr-spacer my-4"}),e.jsx("section",{id:"public",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-xs-6",children:[e.jsx(K,{label:"Temáticas socioambientais",url:"tematica_socioambiental",query:"?others=-1",titleField:"label",onChange:g("tematicas"),value:a.tematicas,multiple:!0,error:s.includes("tematicas")}),e.jsx(A,{type:"info",keyRef:["tematicas"],openHelpbox:C})]}),((G=a.tematicas)==null?void 0:G.find(p=>String(p.id)==="-1"))&&e.jsx("div",{className:"col-xs-6",children:e.jsx(z,{className:"input-text",label:"Especifique",value:a.tematicas_especificar||"",onChange:p=>g("tematicas_especificar")(p.target.value)})})]})}),e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-title"}),e.jsx("div",{className:"section-actions",children:e.jsxs("button",{className:"button-primary",onClick:()=>O(),children:[e.jsx(de,{}),"Gravar"]})})]})]})}),e.jsx(Se,{content:k,onClose:()=>C(null)})]})})})}function re({title:t,keyRef:s,openHelpbox:i}){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{children:t})," ",e.jsx(A,{type:"info",keyRef:s,openHelpbox:i})]})}const js="_vcentered_1g64r_1",vs="_add_1g64r_6",ps="_action_1g64r_7",fs="_timeline_1g64r_33",gs="_highlight_1g64r_36",bs="_each_1g64r_40",_s="_date_1g64r_49",ys="_text_1g64r_52",Ns="_thumb_1g64r_58",Cs="_buttons_1g64r_81",Ss="_editing_1g64r_86",q={vcentered:js,add:vs,action:ps,timeline:fs,highlight:gs,each:bs,date:_s,text:ys,thumb:Ns,"thumb-image":"_thumb-image_1g64r_62",buttons:Cs,editing:Ss,"edit-buttons":"_edit-buttons_1g64r_92"};function $s({projectId:t}){const{server:s}=X(),i=te(),[l,c]=n.useState([]),[d,a]=n.useState(null),[u,r]=n.useState(null),[y,v]=n.useState(null),[m,h]=n.useState(null),{data:w}=Z(["project_timeline",{projectId:t}],{queryFn:async()=>(await F.get(`${s}project/${t}/draft/timeline`)).data,retry:!1,refetchOnWindowFocus:!1}),k=U(o=>F.delete(`${s}project/${t}/draft/timeline/${o}`),{onSuccess:()=>i.invalidateQueries("project_timeline")});n.useEffect(()=>{w&&c(w)},[w]),n.useEffect(()=>{u&&setTimeout(()=>{const o=document.getElementById(`timeline_${u}`);o&&(o.scrollIntoView({block:"end",inline:"nearest"}),v(u),r(null),setTimeout(()=>v(null),2e3))},10)},[l,u]);const C=o=>()=>{a(o)},$=o=>()=>{const O=l.find(b=>b.id===o);O&&h(O)},g=async o=>{o==="confirm"&&await k.mutateAsync(d),a(null)},I=()=>{h(null)},D=()=>{h(null)};return e.jsx(e.Fragment,{children:l&&e.jsxs("div",{className:"page-content",children:[e.jsxs("div",{className:"page-body",children:[e.jsx(se,{middle:!0,headerless:!0,children:e.jsx("div",{className:"p-3",children:e.jsxs("section",{id:"details",children:["A linha do tempo é uma ferramenta para a apresentação e o registro dos principais marcos/eventos da iniciativa. Insira o mês/ano em que o marco/evento aconteceu, uma imagem ilustrativa (pode ser uma fotografia real ou um ícone/desenho) e um texto descritivo. A ferramenta organiza automaticamente a apresentação dos marcos/eventos em ordem cronológica.",e.jsx("br",{}),"Alguns exemplos de marcos/eventos: criação da iniciativa, realização de atividades relevantes, eventos públicos, publicação de normativas, relatórios, materiais educomunicativos, etc."]})})}),e.jsx(se,{middle:!0,headerless:!0,children:e.jsx("div",{className:`p-3 ${q["add-panel"]}`,children:e.jsx("section",{id:"details",children:e.jsx(ge,{projectId:t,editing:m,onHighlight:r,add:!0,onSave:D})})})}),e.jsx(se,{middle:!0,headerless:!0,children:e.jsx("div",{className:"p-3",children:e.jsx("section",{id:"details",children:e.jsx("div",{className:q.timeline,children:!!w&&l.map(o=>e.jsxs(n.Fragment,{children:[(m==null?void 0:m.id)!==o.id&&e.jsxs("div",{id:`timeline_${o.id}`,className:`${q.each} ${y===o.id?q.highlight:""}`,children:[e.jsxs("div",{className:q.date,children:[" ",e.jsx("span",{className:q.text,children:De(o.date).locale("pt-br").format("MMM [de] YYYY")})]}),e.jsx("div",{className:q.thumb,children:e.jsxs("div",{className:q["thumb-image"],children:[!!o.timeline_arquivo&&e.jsx("img",{src:o.timeline_arquivo,alt:"imagem de timeline"}),!o.timeline_arquivo&&e.jsx("img",{src:Xe,alt:"sem imagem de timeline"})]})}),e.jsx("div",{className:q.text,children:o.texto}),e.jsxs("div",{className:q.buttons,children:[e.jsx("button",{className:q.action,onClick:$(o.id),disabled:!!m,children:e.jsx(Ye,{})}),(m==null?void 0:m.id)!==o.id&&e.jsx("button",{className:q.action,onClick:C(o.id),disabled:!!m,children:e.jsx(Je,{})})]})]}),(m==null?void 0:m.id)===o.id&&e.jsx(ge,{projectId:t,editing:m,onHighlight:r,onCancel:I,onSave:D})]},o.id))})})})})]}),e.jsx(je,{open:!!d,content:"Confirma a remoção deste item?",confirmButtonText:"Remover",onClose:g})]})})}function ge({add:t,projectId:s,editing:i,onHighlight:l,onCancel:c,onSave:d}){const{enqueueSnackbar:a,closeSnackbar:u}=ie(),{server:r}=X(),y=te(),[v,m]=n.useState(new Date),[h,w]=n.useState(null),[k,C]=n.useState(null),[$,g]=n.useState(null);n.useEffect(()=>{t?(m(new Date),g(null)):(m(i.date),g(i.texto),w({url:i.timeline_arquivo}))},[i]);const I=o=>{w(o||"remove"),C(o==null?void 0:o.file)},D=async()=>{if(!$||!$.length)return;let o=new FormData;k&&o.append("imagem",k);const O=a("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});try{let b,R;t?(b="post",R=`${r}project/${s}/draft/timeline`):(b="put",R=`${r}project/${s}/draft/timeline/${i.id}`),o.set("entity",JSON.stringify({date:v,texto:$,timeline_arquivo:h}));const{data:G}=await F({method:b,url:R,data:o,config:{headers:{"Content-Type":"multipart/form-data"}}});l(G.id),m(new Date),g(null),w(null),C(null),d(),y.invalidateQueries("project_timeline"),u(O),a("Registro gravado com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})}catch(b){u(O),console.error(b),a("Erro ao gravar o registro!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})}};return e.jsxs("div",{className:`row ${!t&&i?q.editing:""}`,children:[e.jsx("div",{className:`col-xs-2 ${q.vcentered}`,children:e.jsx(ue,{className:"input-datepicker",label:"Mês",value:v||"",onChange:m,views:["month","year"],inputFormat:"MM/yyyy",disabled:t&&!!i})}),e.jsx("div",{className:"col-xs-1",children:e.jsx(Ie,{onChange:I,url:h==null?void 0:h.url,alt:"imagem",title:"Imagem",disabled:t&&!!i,viewer:!1})}),e.jsx("div",{className:"col-xs-8",children:e.jsx(z,{className:"input-text",label:"Texto",value:$||"",onChange:o=>g(o.target.value),multiline:!0,rows:4,disabled:t&&!!i})}),e.jsxs("div",{className:`col-xs-1 ${q.vcentered}`,children:[t&&e.jsx("button",{className:q.add,onClick:D,disabled:t&&!!i,children:e.jsx(as,{})}),!t&&e.jsxs("div",{className:q["edit-buttons"],children:[e.jsx("button",{className:q.add,onClick:D,children:e.jsx(es,{})}),e.jsx("button",{className:q.add,onClick:c,children:e.jsx(ss,{})})]})]})]})}le.forwardRef(function(t,s){const{onChange:i,...l}=t;return e.jsx(oe,{...l,getInputRef:s,onValueChange:c=>{i({target:{name:t.name,value:parseFloat(c.value)}})},decimalSeparator:",",thousandSeparator:".",allowNegative:!1,fixedDecimalScale:!0,decimalScale:2})});const ws=le.forwardRef(function(t,s){const{onChange:i,...l}=t;return e.jsx(oe,{...l,getInputRef:s,onValueChange:c=>{i({target:{name:t.name,value:parseInt(c.value,10)}})},decimalSeparator:!1,thousandSeparator:".",allowNegative:!1})});le.forwardRef(function(t,s){const{onChange:i,...l}=t;return e.jsx(oe,{...l,getInputRef:s,onValueChange:c=>{i({target:{name:t.name,value:parseFloat(c.value)}})},decimalSeparator:",",thousandSeparator:".",allowNegative:!1,fixedDecimalScale:!0,decimalScale:2})});le.forwardRef(function(t,s){const{onChange:i,...l}=t;return e.jsx(oe,{...l,getInputRef:s,onValueChange:c=>{i({target:{name:t.name,value:c.value}})},format:"###.###.###-##"})});const W={INT:1,TEXT:2,TEXT_M:3,SEL_S:5,SEL_M:6,SEL_SO:7,SEL_MO:8,ITEMS:9,SN:10};function ks({analysis:t}){const{currentCommunity:s,changeRoute:i,params:l}=xe(),{server:c}=X(),d=te(),{enqueueSnackbar:a,closeSnackbar:u}=ie(),[r,y]=n.useState(null),[v,m]=n.useState(null),[h,w]=n.useState(null),[k,C]=n.useState([]),[$,g]=n.useState(!1),[I,D]=n.useState(null),[o,O]=n.useState(null),[b,R]=n.useState(null),[G,p]=n.useState(null),[N,x]=n.useReducer((f,P)=>{switch(P.type){case"setup":return P.payload;case"change":return console.log("change",P.payload.question,P.payload.value),{...f,[P.payload.question]:P.payload.value};default:return f}},null),{data:_}=Z("project",{queryFn:async()=>(await F.get(`${c}project/id_from_community/${s.id}`)).data}),{data:S}=Z(["indic_data",{project_id:_==null?void 0:_.id,currentIndics:v}],{queryFn:async()=>(await F.get(`${c}project/${_==null?void 0:_.id}/indic/${v}`)).data,enabled:!!(_!=null&&_.id)&&!!v}),B=U(()=>F.put(`${c}project/${_==null?void 0:_.id}/indic/${v}`,N),{onSuccess:()=>{d.invalidateQueries("indic_data"),d.invalidateQueries("project_indics")}});n.useEffect(()=>{t&&y(Ze(t))},[t]),n.useEffect(()=>{l&&l[1]?m(l[1]):m("1_1")},[l]),n.useEffect(()=>{v&&O(v.split("_")[0])},[v]),n.useEffect(()=>{async function f(){await x({type:"setup",payload:S.data}),g(!1)}S&&(console.log("indicData",S),w(S.indic),C(S.problems),f())},[S]),n.useEffect(()=>{},[k]);const E=f=>P=>{x({type:"change",payload:{question:f,value:P}}),g(!0)},H=f=>!$&&k.includes(`${v}_${f}`),Pe=async()=>{const f=a("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});try{await B.mutateAsync(),d.invalidateQueries("project_indics"),u(f),a("Indicador gravado com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),g(!1)}catch(P){u(f),console.error(P),a("Erro ao gravar o indicador!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})}},Ae=async()=>{await x({type:"setup",payload:S.data}),g(!1)},Fe=(f,P)=>()=>{R(P),$?D(f):i({params:["indicadores",f]})},Oe=f=>{R(b!==f?f:null)},Me=async f=>{f==="confirm"&&i({params:["indicadores",I]}),D(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-content",children:[e.jsx("div",{className:"page-sidebar",children:e.jsx("div",{className:`sidebar-body ${j.tree}`,children:r&&e.jsx("ul",{children:r.map(f=>e.jsxs("li",{className:`mb-3 ${j.li_lae_titles}`,onClick:()=>Oe(f.id),children:[e.jsx(be,{title:f.title,ready:f.ready,className:o===f.id||b===f.id?j.strong:""}),e.jsx("ul",{className:`${o===f.id||b===f.id?j.show:j.hide}`,children:f.indics.map(P=>e.jsx("li",{className:`${j.li_indicators}`,onClick:Fe(P.id,f.id),children:e.jsx(be,{title:P.title,ready:P.ready,className:`${j.indic} ${v===P.id?j.selected:""}`})},P.id))})]},f.id))})})}),e.jsxs("div",{className:"page-body",children:[h&&e.jsx(ts,{sx:{button:{color:"inherit"}},headerless:!0,children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:`${j["indic-header"]} mb-3`,children:[e.jsx("div",{className:`${j.title_box}`,children:e.jsx("strong",{children:`${h.lae_title} >> ${h.name}`})}),e.jsxs("div",{className:j.actions,children:[e.jsx(ve,{tab:"indicadores"}),e.jsx("button",{className:"button-primary",onClick:Pe,disabled:!$,children:"Gravar"}),e.jsx("button",{className:j.button_delete,onClick:Ae,disabled:!$,children:"Restaurar"})]})]}),e.jsx("div",{children:e.jsx(_e,{question:{title:h.base_question,type:"base"},data:N==null?void 0:N.base,onChange:E("base"),hasError:H("base"),keyRef:[h.lae_id,h.id,"base"],openHelpbox:f=>p(f)})}),N&&N.base==="sim"&&e.jsx("div",{children:h.questions.map(f=>e.jsx(_e,{question:f,data:N?N[f.id]:null,onChange:E(f.id),hasError:H(f.id),keyRef:[h.lae_id,h.id,f.id],openHelpbox:P=>p(P)},f.id))})]})}),e.jsx(Se,{content:G,onClose:()=>p(null)})]})]}),e.jsx(je,{open:!!I,content:"Você deseja sair do indicador sem salvar as alterações?",confirmButtonText:"Confirmar",onClose:Me})]})}function be({title:t,ready:s,className:i}){let l=s?e.jsx(Ee,{}):e.jsx(L,{});return e.jsxs("div",{className:`${j["item-container"]} ${i}`,children:[e.jsx("div",{className:`${j[s?"done":"error"]}`,children:l}),e.jsx("div",{children:t})]})}function _e({question:{title:t,type:s,options:i},data:l,hasError:c,onChange:d,keyRef:a,openHelpbox:u}){return e.jsxs("div",{className:`${j.field}`,children:[s==="base"&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"base-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsxs(ae,{id:"base-select",value:l||"none",onChange:r=>d(r.target.value),className:"input-select",children:[e.jsx(T,{value:"none",children:" -- Selecione -- "}),e.jsx(T,{value:"sim",children:"Sim"}),e.jsx(T,{value:"nao",children:"Não"}),e.jsx(T,{value:"nao_aplica",children:"Não se aplica"})]})]}),s===W.INT&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"int-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsx(z,{className:"input-text",sx:{maxWidth:"200px",width:"50%"},value:l||"",onChange:r=>d(r.target.value||""),InputProps:{inputComponent:ws}})]}),s===W.TEXT&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"text-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsx(z,{className:"input-text",value:l||"",onChange:r=>d(r.target.value)})]}),s===W.TEXT_M&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"text-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsx(z,{className:"input-text",value:l||"",onChange:r=>d(r.target.value),multiline:!0,rows:4})]}),s===W.SEL_S&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"sels-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsxs(ae,{id:"base-select",value:l||"none",onChange:r=>d(r.target.value),className:"input-select",children:[e.jsx(T,{value:"none",children:" -- Selecione -- "}),i&&i.map(r=>e.jsx(T,{value:r.value,children:r.title},r.value))]})]}),s===W.SEL_M&&e.jsx(e.Fragment,{children:e.jsx(Te,{title:t,value:l||[],options:i,onChange:d,hasError:c,keyRef:a,openHelpbox:u})}),s===W.SEL_SO&&e.jsx(Es,{title:t,value:l||"none",options:i,onChange:d,hasError:c,keyRef:a,openHelpbox:u}),s===W.SEL_MO&&e.jsx(Ts,{title:t,value:l||[],options:i,onChange:d,hasError:c,keyRef:a,openHelpbox:u}),s===W.ITEMS&&e.jsx(e.Fragment,{children:e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"sn-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsx(me,{data:l||"",onChange:d})]})}),s===W.SN&&e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"sn-label",children:e.jsxs("div",{className:j.title_box,children:[c&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:a,openHelpbox:u})]})}),e.jsxs(ae,{id:"sn-select",value:l||"none",onChange:r=>d(r.target.value),className:"input-select",children:[e.jsx(T,{value:"none",children:" -- Selecione -- "}),e.jsx(T,{value:"sim",children:"Sim"}),e.jsx(T,{value:"nao",children:"Não"})]})]}),e.jsx("hr",{className:"hr-spacer my-4"})]})}function Te({title:t,value:s,options:i,hasError:l,onChange:c,keyRef:d,openHelpbox:a}){const u=r=>y=>{y.target.checked?c([...s,r]):c(s.filter(v=>v!==r))};return e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"base-label",children:e.jsxs("div",{className:j.title_box,children:[l&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:d,openHelpbox:a})]})}),e.jsx(ze,{children:i&&i.map(r=>e.jsx(Be,{control:e.jsx(Ge,{checked:s&&s.includes(r.value),onChange:u(r.value),name:r.title}),label:r.title},r.value))})]})}function Es({title:t,value:s,options:i,hasError:l,onChange:c,keyRef:d,openHelpbox:a}){const u=r=>y=>{c({...s,[r]:y.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs(Q,{fullWidth:!0,children:[e.jsx(V,{id:"so-label",children:e.jsxs("div",{className:j.title_box,children:[l&&e.jsx("div",{className:`${j.error}`,children:e.jsx(L,{})}),e.jsx("div",{className:`${j["form-label-title"]}`,children:t}),e.jsx(A,{keyRef:d,openHelpbox:a})]})}),e.jsxs(ae,{id:"base-select",value:s?s.value:"none",onChange:u("value"),className:"input-select",children:[e.jsx(T,{value:"none",children:" -- Selecione -- "}),i&&i.map(r=>e.jsx(T,{value:r.value,children:r.title},r.value))]})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(z,{className:"input-text",label:"outro",value:s&&s.other||"",onChange:u("other")})})})]})}function Ts({title:t,value:s,options:i,hasError:l,onChange:c,keyRef:d,openHelpbox:a}){const u=r=>y=>{c({...s,[r]:y})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(Te,{title:t,value:s&&s.items?s.items:[],options:i,onChange:u("items"),hasError:l,keyRef:d,openHelpbox:a})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(z,{className:"input-text",label:"outro",value:s&&s.other||"",onChange:r=>u("other")(r.target.value)})})})]})}async function ye(t,s){const{data:{geoms:i,bbox:l}}=await F.get(`${t}project/${s}/geo-draw`);return console.log({geoms:i,bbox:l}),{geoms:i,bbox:l}}function Rs(){const t=te(),{server:s}=X(),{currentCommunity:i}=xe(),{enqueueSnackbar:l,closeSnackbar:c}=ie(),[d,a]=n.useState(null),[u,r]=n.useState(null),[y,v]=n.useState(""),[m,h]=n.useState(!1),[w,k]=n.useState(null),[C,$]=n.useState(!1);n.useEffect(()=>{async function x(){const{data:{id:_}}=await F.get(`${s}project/id_from_community/${i.id}`);a(_)}x()},[i.id,s]);const[g,I]=n.useState(null),[D,o]=n.useState(null);n.useEffect(()=>{async function x(){const{data:{atuacao_aplica:_,atuacao_naplica_just:S,ufs:B}}=await F.get(`${s}project/${d}/geo-draw/has-geo`);r(_),v(S||""),k(B)}d&&x()},[d,s]),n.useEffect(()=>{async function x(){const{geoms:_,bbox:S}=await ye(s,d);I(_),S[0][0]&&o(S)}u&&x()},[u,d,s]);const O=async()=>{const x=l("Voltando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}}),{geoms:_,bbox:S}=await ye(s,d);I(_),S[0][0]&&o(S),c(x),h(!1)},b=async x=>{const _=x.features.map(({geometry:E})=>E),S=l("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}}),{data:B}=await F.post(`${s}project/${d}/geo-draw`,{geoms:_});k(B.ufs),c(S),l("Atuação gravado com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})},R=async x=>{console.log({checked:x});const _=l("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});await F.put(`${s}project/${d}/geo-draw/${x?x==="none"?"none":"1":"0"}`),t.invalidateQueries("project_indics"),c(_),r(x)},G=async()=>{const x=l("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});return await F.put(`${s}project/${d}/draft/justification`,{value:y}),t.invalidateQueries("project_info"),c(x),!0},p=async()=>{$(!1);const x=l("Gravando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});await F.put(`${s}project/${d}/draft/ufs`,{ufs:w}),t.invalidateQueries("project_info"),c(x)},N=x=>{k(x)};return e.jsx("div",{className:"page-content",children:e.jsx("div",{className:"page-body",children:e.jsx(se,{middle:!0,headerless:!0,children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{className:"col-xs-8",style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{className:"col-xs-5",style:{display:"flex"},children:e.jsx(K,{label:"Estados",url:"uf/related",urlSingle:"uf",titleField:"value",onChange:N,value:w,multiple:!0,disabled:!C})}),e.jsxs("div",{className:"col-xs-5",style:{display:"flex"},children:[!C&&e.jsx("button",{className:"button-primary",onClick:()=>$(!0),children:"Alterar estados"}),C&&e.jsx("button",{className:"button-primary",onClick:p,children:"Gravar estados"})]})]}),e.jsx(ve,{tab:"atuacao"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx("div",{className:"col-xs-12",style:{display:"flex"},children:e.jsxs(Ps,{children:[e.jsx("div",{children:"É possivel representar este projeto de geograficamente?"}),e.jsx(Q,{children:e.jsxs(ae,{className:"input-select",value:u===null?"none":u,onChange:x=>R(x.target.value),children:[e.jsx(T,{value:"none",children:" -- selecione -- "}),e.jsx(T,{value:!0,children:"Sim"}),e.jsx(T,{value:!1,children:"Não"})]})})]})})}),u===!0&&e.jsx(Ke,{entity:"project",initialGeoms:g,initialBBOX:D,isEditing:m,onEdit:x=>h(x),onSave:b,onCancel:O}),u===!1&&e.jsxs("section",{id:"details",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-title",children:"Justificativa"}),e.jsx("div",{className:"section-actions",children:e.jsxs("button",{className:"button-primary",onClick:()=>G(),children:[e.jsx(de,{}),"Gravar"]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xs-12",children:e.jsx(z,{className:"input-text",value:y||"",onChange:x=>v(x.target.value),multiline:!0,rows:4})})})]})]})})})})}const Ps=is.div`
  display: flex;
  margin-bottom: 20px;
  justify-content: end;
  align-items: center;
  div {
    margin-right: 10px;
  }
`,As="_button_delete_11779_45",Fs="_Roll_11779_1",Os="_term_11779_82",Re={button_delete:As,Roll:Fs,term:Os},ta=()=>{const{currentCommunity:t,changeRoute:s,params:i}=xe(),{server:l}=X(),{user:c,updateUser:d}=He(),{enqueueSnackbar:a,closeSnackbar:u}=ie(),[r,y]=n.useState(null),[v,m]=n.useState(!1),[h,w]=n.useState(null),[k,C]=n.useState(null),[$,g]=n.useState(!1),[I,D]=n.useState(!1),[o,O]=n.useState(!1),{data:b}=Z(["project",{currentCommunity:t.id}],{queryFn:async()=>(await F.get(`${l}project/id_from_community/${t.id}`)).data}),{data:R}=Z(["project_indics",{project_id:b==null?void 0:b.id}],{queryFn:async()=>(await F.get(`${l}project/${b==null?void 0:b.id}/verify`)).data,enabled:!!(b!=null&&b.id)}),G={publish:U(()=>F.put(`${l}project/${h}/publish`)),remove:U(()=>F.delete(`${l}project/${r}`))},p=()=>{y(t.id),m(!0)},N=async E=>{if(E==="confirm"){let H=await G.remove.mutateAsync(r);a("Iniciativa deletada com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),s({community:H.data}),d()}y(null),m(!1)};n.useEffect(()=>{O(c.membership.map(E=>E.id===1||E.id===t.id&&E.type==="adm").reduce((E,H)=>E||H))},[o,c,t]),n.useEffect(()=>{b&&w(b.id)},[b]),n.useEffect(()=>{C(i&&i.length?i[0]:"informacao")},[i]);const x=()=>{D(!0)},_=E=>{E==="confirm"&&S(),D(!1)},S=async()=>{const E=a("Publicando...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}});try{const{data:H}=await G.publish.mutateAsync();if(u(E),H.success)window.location=`${window.location}`,a("Iniciativa publicada com sucesso!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}});else if(H.reason.code==="not_ready")a(e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Esta iniciativa ainda não está pronta para ser publicada!"})}),e.jsx("p",{children:"Verifique se todos os campos das abas de Informações e Indicadores estão completamente preenchidos."})]}),{autoHideDuration:1e4,variant:"warning",anchorOrigin:{vertical:"top",horizontal:"center"}});else throw new Error("unknown reason")}catch(H){u(E),console.error(H),a("Erro ao publicar a iniciativa!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})}},B=()=>{window.open(`${l}project/${h}/download`,"_blank")};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx(Le,{title:"Iniciativa"}),e.jsxs("div",{className:"page-header-buttons",children:[e.jsxs("button",{className:"button-outline",onClick:B,children:[e.jsx(fe,{}),"Baixar CSV"]}),e.jsxs("button",{className:"button-outline",onClick:()=>g(!0),children:[e.jsx(fe,{}),"Baixar GEO (Shapefile)"]}),o&&o===!0&&e.jsxs("button",{className:"button-primary",onClick:x,children:[e.jsx(Ee,{}),"Publicar"]}),o&&o===!0&&e.jsxs("button",{className:Re.button_delete,onClick:p,children:[e.jsx(he,{}),"Excluir"]})]})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx(ms,{defaultTab:k,onTabChange:E=>s({params:[E]}),analysis:R}),h&&e.jsxs(e.Fragment,{children:[k==="informacao"&&e.jsx(xs,{projectId:h,problems:R&&Object.keys(R.analysis.information).filter(E=>R.analysis.information[E]===!1)||[]}),k==="conexoes"&&e.jsx(Ue,{entityId:h}),k==="indicadores"&&e.jsx(ks,{analysis:R}),k==="abrangencia"&&e.jsx(Rs,{projectId:h}),k==="timeline"&&e.jsx($s,{projectId:h})]})]}),e.jsx(ns,{display:"flex",justifyContent:"space-between"}),e.jsx(je,{open:v,content:"Confirma a remoção desta iniciativa?",confirmButtonText:"Remover",onClose:N}),e.jsx(Ms,{open:$,onClose:()=>g(!1)}),e.jsx(qs,{open:I,onClose:_})]})};function Ms({open:t,onClose:s}){return e.jsx("div",{children:e.jsxs($e,{open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(we,{id:"alert-dialog-title",children:"Aviso"}),e.jsx(ne,{children:e.jsx(ne,{id:"alert-dialog-description",children:"Este recurso esta em fase de implementação!"})}),e.jsx(ke,{children:e.jsx("button",{className:"button-primary",onClick:()=>s("cancel"),autoFocus:!0,children:"Fechar"})})]})})}function qs({open:t,onClose:s}){return e.jsx("div",{children:e.jsxs($e,{open:t,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"md",children:[e.jsx(we,{id:"alert-dialog-title",children:"Termo de Adesão ao PPPZCM"}),e.jsx(ne,{children:e.jsxs(ne,{id:"alert-dialog-description",className:Re.term,children:[e.jsx("p",{children:"Declaro estar ciente e de acordo com as diretrizes político-pedagógicas do PPPZCM e que reconheço o PPPZCM como um instrumento político-pedagógico de gestão de processos educativos estruturantes e continuados com o foco na contribuição da conservação da biodiversidade e uso sustentável da zona costeira e marinha do Brasil."}),e.jsx("p",{children:"Neste sentido, declaro a adesão ao PPPZCM por meio da inserção da ação/projeto ora cadastrada na plataforma MonitoraEA PPPZCM. Declaro que a execução técnica e financeira da referida ação/projeto está sob a responsabilidade integral da instituição proponente. A ação/projeto indicada comporá o eixo operacional do PPPZCM."}),e.jsx("p",{children:"Ainda, declaro concordar com a divulgação pública dos dados da ação/projetos ora inseridos – por meio da plataforma MonitoraEA PPPZCM - e assumo a inteira responsabilidade pelo teor e veracidade das informações cadastradas."}),e.jsx("p",{children:"Por fim, declaro meu consentimento com a coleta, uso e tratamento de meus dados pessoais pela ANPPEA, que atuará como controlador de dados, nos termos da Lei 13.709/2018, e que tenho ciência de que poderei solicitar, a qualquer momento, a exclusão de meus dados do banco de dados da plataforma MonitoraEA PPPZCM, bem como a revogação deste consentimento."})]})}),e.jsxs(ke,{children:[e.jsx("button",{className:"button-primary",onClick:()=>s("confirm"),children:"Concordo"}),e.jsx(Qe,{onClick:()=>s("cancel"),autoFocus:!0,children:"Não concordo"})]})]})})}export{ta as default};
