import{u as h,b as g,d as _,c as v,e as x,j as s,n as c}from"./index-DLt25zcS.js";const j="_commission_list_g5pta_1",b="_commission_g5pta_1",y="_actions_g5pta_8",N="_sent_g5pta_16",a={commission_list:j,commission:b,actions:y,sent:N};function C(){const{server:n}=h(),{changeRoute:m}=g(),l=_(),{enqueueSnackbar:e,closeSnackbar:d}=v(),{data:o}=x(["user_commissions_list"],{queryFn:async()=>(await c.get(`${n}commission/mine`)).data}),t=async(i,p)=>{const u=e("Enviando pedido de participação...",{persist:!0,anchorOrigin:{vertical:"top",horizontal:"right"}}),{data:r}=await c.post(`${n}commission/${p}/participate`,{isADM:i});d(u),r.success?(e("Seu pedido de participação foi enviado! Uma notificação será enviada, no momento da aprovação",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),l.invalidateQueries("user_commissions_list")):r.error==="already_member"?e("Você já é membro deste grupo!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}):r.error==="already_in_list"?e("Você já está na lista de aprovação deste grupo!",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}):e("Erro ao enviar seu pedido de participação! Por favor, entre em contato com a administração",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}})};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"page width-limiter",children:s.jsx("div",{className:"page-content",children:s.jsx("div",{className:"page-body",children:s.jsxs("div",{className:"tablebox",style:{padding:"20px"},children:[s.jsx("h4",{children:"A Rede de Comunidades de Aprendizagens dos Colegiados é composta por:"}),s.jsxs("ul",{className:a.commission_list,children:[!o&&s.jsx(s.Fragment,{children:"Carregando..."}),o&&o.map(i=>s.jsxs("li",{className:a.commission,children:[s.jsx("div",{className:a.name,children:i.name}),s.jsxs("div",{className:a.actions,children:[i.is_requesting&&s.jsx("div",{className:a.sent,children:"Solicitação enviada"}),!i.is_requesting&&s.jsxs(s.Fragment,{children:[i.is_member&&s.jsx(s.Fragment,{children:s.jsx("button",{className:"button-primary",onClick:()=>m({community:i.community_id}),children:"Acessar"})}),!i.is_member&&s.jsxs(s.Fragment,{children:[!i.has_members&&s.jsx("button",{className:"button-outline",onClick:()=>t(!0,i.id),children:"Participar como responsável"}),s.jsx("button",{className:"button-primary",onClick:()=>t(!1,i.id),children:"Participar como colaborador"})]})]})]})]},i.id))]})]})})})})})}export{C as default};
